<md-dialog class="dialog-extend"
           ng-attr-aria-label="{{!ctrl.editMode ? lang.add_new_reference_plan_number: ctrl.model.getNames()}}">
    <div layout="column">
        <md-toolbar>
            <span class="p20" ng-if="!ctrl.model.id">{{lang.add_new_reference_plan_Item}}</span>
            <span class="p20" ng-if="ctrl.model.id">{{ctrl.model.getNames()}}</span>
            <close-dialog-directive></close-dialog-directive>
        </md-toolbar>
        <md-content scroll-directive>
            <form name="referencePlanNumberForm" autocomplete="off">
                <md-tabs md-dynamic-height>
                    <md-tab label="{{lang.reference_plan_element_expression}}">
                        <md-content>

                            <div layout="column" class="p20">
                                <div layout="row">
                                    <md-switch ng-model="ctrl.referencePlanItemPerOU"
                                               ng-change="ctrl.changePerEntityOu()">
                                        {{lang.per + ' : ' +ctrl.referencePlanItem.getPerOUEntityTranslate()}}
                                    </md-switch>
                                </div>
                                <div layout="row">
                                    <md-input-container flex>
                                        <label for="docClass">{{lang.label_document_class}}</label>
                                        <md-select id="docClass" aria-label="classDescription"
                                                   ng-model="ctrl.referencePlanItem.expressionComponents.classDescription">
                                            <md-option ng-value="documentClass.customLookupKey"
                                                       ng-repeat="documentClass in ctrl.documentClasses">
                                                {{documentClass.getTranslatedName()}}
                                            </md-option>
                                        </md-select>
                                    </md-input-container>
                                    <md-input-container flex>
                                        <label for="securityLevel">{{lang.security_level}}</label>
                                        <md-select id="securityLevel" aria-label="securityLevel"
                                                   ng-model="ctrl.referencePlanItem.expressionComponents.securityLevel">
                                            <md-option ng-value="security.lookupKey"
                                                       ng-repeat="security in ctrl.securityLevels">
                                                {{security.getTranslatedName()}}
                                            </md-option>
                                        </md-select>
                                    </md-input-container>
                                    <md-input-container flex>
                                        <label for="docType">{{lang.label_document_type}}</label>
                                        <md-select id="docType" ng-model="ctrl.referencePlanItem.expressionComponents.docType">
                                            <md-option ng-value="documentType.lookupKey"
                                                       ng-repeat="documentType in ctrl.documentTypes">
                                                {{documentType.getTranslatedName()}}
                                            </md-option>
                                        </md-select>
                                    </md-input-container>
                                </div>
                            </div>

                        </md-content>
                    </md-tab>
                    <md-tab label="{{lang.reference_plan_element_pattern}}">
                        <md-content>
                            <reference-plan-element-directive
                                    reference-item="ctrl.referencePlanItem"></reference-plan-element-directive>
                        </md-content>
                    </md-tab>
                </md-tabs>
            </form>
        </md-content>
        <div>
            <div layout="row">
                <md-button class="md-raised" ng-if="!ctrl.editMode"
                           ng-click="ctrl.saveReferencePlanItem()">
                    {{lang.add}}
                </md-button>
                <md-button class="md-raised" ng-if="ctrl.editMode"
                           ng-click="ctrl.saveReferencePlanItem()">
                    {{lang.save}}
                </md-button>
                <span flex></span>
                <md-button class="md-raised" ng-click="ctrl.closeReferencePlanItem()">
                    {{lang.close}}
                </md-button>
            </div>
        </div>
    </div>
</md-dialog>