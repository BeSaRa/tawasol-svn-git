<md-dialog class="dialog-extend mw60 cms-tabs-dialog" layout="column"
           ng-class="{'cms-dialog-full-screen':ctrl.fullScreen}"
           id="view-tracking-sheet-dialog" aria-label="{{lang[ctrl.popupHeading]}}" layout="column">
    <popup-toolbar-directive header-text="{{ctrl.popupHeading}}"
                             full-screen-button="true" full-screen="ctrl.fullScreen"></popup-toolbar-directive>
    <md-dialog-content scroll-directive flex>
        <div>
            <!-- TABS GRID VIEW -->
            <md-tabs md-dynamic-height>
                <!-- Workflow History Tab -->
                <md-tab label="{{lang.view_tracking_sheet_work_flow_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_work_flow_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_work_flow_history')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.workflowHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataWorkflowHistory">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('userFromInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_sender}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('userFromOuInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_sender_ou}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('userToInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_receiver}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('userToOuInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_receiver_ou}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('action','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action}}</span>
                                            </th>
                                            <!--<th md-column md-order-by="documentCreationDate_vts"><span>{{lang.view_tracking_sheet_creation_date}}</span>
                                            </th>-->
                                            <th md-column md-order-by="actionDate_vts">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column md-order-by="comments">
                                                <span>{{lang.view_tracking_sheet_comments}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="workflowHistoryRecord" md-row
                                            ng-repeat="workflowHistoryRecord in ctrl.workflowHistoryRecords | filter:ctrl.searchModelWorkflowHistory | limitTo: ctrl.workflowHistoryGrid.limit: ((ctrl.workflowHistoryGrid.page - 1) * ctrl.workflowHistoryGrid.limit) track by $index">
                                            <td md-cell class="zero-p-right">
                                                {{workflowHistoryRecord.userFromInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                {{workflowHistoryRecord.userFromOuInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                <span class="action-type-icon-container">
                                                    <md-icon
                                                            ng-if="workflowHistoryRecord.actionType_vts"
                                                            md-svg-icon="{{workflowHistoryRecord.actionType_vts.icon}}"
                                                            tooltip="{{lang[workflowHistoryRecord.actionType_vts.langKey]}}"
                                                    ></md-icon>
                                                </span>
                                                {{workflowHistoryRecord.userToInfo.getTranslatedName()}}
                                            </td><!--{{workflowHistoryRecord.getTranslatedUserTo()}}-->
                                            <td md-cell>
                                                {{workflowHistoryRecord.userToOuInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{workflowHistoryRecord.getTranslatedAction()}}</td>
                                            <!--<td md-cell>{{workflowHistoryRecord.documentCreationDate_vts}}</td>-->
                                            <td md-cell>{{workflowHistoryRecord.actionDate_vts}}</td>
                                            <td md-cell class="cms-comment">{{workflowHistoryRecord.comments}}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.workflowHistoryGrid.limitOptions"
                                        md-limit="ctrl.workflowHistoryGrid.limit"
                                        md-page="ctrl.workflowHistoryGrid.page"
                                        md-total="{{ctrl.workflowHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.workflowHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Outgoing Delivery Reports / Messaging History -->
                <md-tab label="{{lang.view_tracking_sheet_outgoing_delivery_reports}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_outgoing_delivery_reports')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_outgoing_delivery_reports')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.outgoingDeliveryReportGrid.order"
                                               md-on-reorder="ctrl.getSortedDataOutgoingDeliveryReport">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('sentByIdInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_sent_by}}</span></th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('mainSiteFromIdInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_main_site_from}}</span></th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('subSiteFromIdInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_sub_site_from}}</span></th>
                                            <!--<th md-column md-order-by="priorityLevelInfo"><span>{{lang.view_tracking_sheet_priority_level}}</span></th>-->
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('receivedByIdInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_received_by}}</span></th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('mainSiteToIdInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_main_site_to}}</span></th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('subSiteToIdInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_sub_site_to}}</span></th>
                                            <th md-column md-order-by="actionDate_vts">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column md-order-by="deliveryDate_vts">
                                                <span>{{lang.view_tracking_sheet_delivery_date}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('messageStatus','Information')}}">
                                                <span>{{lang.view_tracking_sheet_message_status}}</span></th>
                                            <th md-column md-order-by="comment">
                                                <span>{{lang.view_tracking_sheet_comments}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="outgoingDeliveryReportRecord" md-row
                                            ng-repeat="outgoingDeliveryReportRecord in ctrl.outgoingDeliveryReportRecords | filter:ctrl.searchModelOutgoingDeliveryReports | limitTo: ctrl.outgoingDeliveryReportGrid.limit: ((ctrl.outgoingDeliveryReportGrid.page - 1) * ctrl.outgoingDeliveryReportGrid.limit) track by $index">
                                            <td md-cell>
                                                {{outgoingDeliveryReportRecord.sentByIdInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                {{outgoingDeliveryReportRecord.mainSiteFromIdInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                {{outgoingDeliveryReportRecord.subSiteFromIdInfo.getTranslatedName()}}
                                            </td>
                                            <!--<td md-cell>{{outgoingDeliveryReportRecord.priorityLevelInfo.getTranslatedName()}}</td>-->
                                            <td md-cell>
                                                {{outgoingDeliveryReportRecord.receivedByIdInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                {{outgoingDeliveryReportRecord.mainSiteToIdInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                {{outgoingDeliveryReportRecord.subSiteToIdInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{outgoingDeliveryReportRecord.actionDate_vts}}</td>
                                            <td md-cell>{{outgoingDeliveryReportRecord.deliveryDate_vts}}</td>
                                            <td md-cell>
                                                {{outgoingDeliveryReportRecord.messageStatus.getTranslatedName()}}
                                            </td>
                                            <td md-cell class="cms-comment">
                                                {{outgoingDeliveryReportRecord.comment}}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.outgoingDeliveryReportGrid.limitOptions"
                                        md-limit="ctrl.outgoingDeliveryReportGrid.limit"
                                        md-page="ctrl.outgoingDeliveryReportGrid.page"
                                        md-total="{{ctrl.outgoingDeliveryReportRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.outgoingDeliveryReportGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Received Incoming History / ExportedTrackingSheetResult -->
                <md-tab label="{{lang.view_tracking_sheet_received_incoming_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_received_incoming_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_received_incoming_history')">
                    <md-content class="md-padding">
                        <div layout="row">
                            <md-input-container flex>
                                <label for="receivedIncomingSite">{{lang.sites_sub_site}}</label>
                                <md-select name="receivedIncomingSite" id="receivedIncomingSite"
                                           ng-model="ctrl.trackingSheetService.selectedReceivedIncomingSite"
                                           ng-model-options="{trackBy: '$value.vsId'}"
                                           ng-change="ctrl.setSelectedReceivedIncomingSiteLength($event)">
                                    <md-option ng-repeat="option in ctrl.receivedIncomingHistoryRecords track by $index"
                                               ng-value="option">{{option.vts_subSiteInfo.getTranslatedName()}}
                                    </md-option>
                                </md-select>
                            </md-input-container>
                        </div>
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.receivedIncomingHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataReceivedIncomingHistory">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('userFromInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_sender}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('userToInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_receiver}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('action','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action}}</span>
                                            </th>
                                            <!--<th md-column md-order-by="documentCreationDate_vts"><span>{{lang.view_tracking_sheet_creation_date}}</span>
                                            </th>-->
                                            <th md-column md-order-by="actionDate_vts">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column md-order-by="comments">
                                                <span>{{lang.view_tracking_sheet_comments}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="record" md-row
                                            ng-repeat="record in ctrl.trackingSheetService.selectedReceivedIncomingSite.eventLogViewList | filter:ctrl.searchModelReceivedIncomingHistory | limitTo: ctrl.receivedIncomingHistoryGrid.limit: ((ctrl.receivedIncomingHistoryGrid.page - 1) * ctrl.receivedIncomingHistoryGrid.limit) track by $index">
                                            <td md-cell class="zero-p-right">
                                                {{record.userFromInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                <span class="action-type-icon-container">
                                                    <md-icon
                                                            ng-if="record.actionType_vts"
                                                            md-svg-icon="{{record.actionType_vts.icon}}"
                                                            tooltip="{{lang[record.actionType_vts.langKey]}}"
                                                    ></md-icon>
                                                </span>
                                                {{record.userToInfo.getTranslatedName()}}
                                            </td><!--{{record.getTranslatedUserTo()}}-->
                                            <td md-cell>{{record.getTranslatedAction()}}</td>
                                            <!--<td md-cell>{{record.documentCreationDate_vts}}</td>-->
                                            <td md-cell>{{record.actionDate_vts}}</td>
                                            <td md-cell class="cms-comment">{{record.comments}}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.receivedIncomingHistoryGrid.limitOptions"
                                        md-limit="ctrl.receivedIncomingHistoryGrid.limit"
                                        md-page="ctrl.receivedIncomingHistoryGrid.page"
                                        md-total="{{ctrl.selectedReceivedIncomingSiteLength}}"
                                        md-page-select
                                        md-on-paginate="ctrl.receivedIncomingHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Full History -->
                <md-tab label="{{lang.view_tracking_sheet_full_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_full_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_full_history')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.fullHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataFullHistory">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionByInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionByOUInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by_department}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionToInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_to}}</span></th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionTypeInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_type}}</span>
                                            </th>
                                            <th md-column md-order-by="comments">
                                                <span>{{lang.view_tracking_sheet_comments}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="fullHistoryRecord" md-row
                                            ng-repeat="fullHistoryRecord in ctrl.fullHistoryRecords | filter:ctrl.searchModelFullHistory | limitTo: ctrl.fullHistoryGrid.limit: ((ctrl.fullHistoryGrid.page - 1) * ctrl.fullHistoryGrid.limit) track by $index"
                                            ng-class="{'font-bold': fullHistoryRecord.actionByInfo.id === ctrl.employee.id}">
                                            <td md-cell>
                                                <span class="action-type-icon-container">
                                                    <md-icon
                                                            ng-if="fullHistoryRecord.actionType_vts"
                                                            md-svg-icon="{{fullHistoryRecord.actionType_vts.icon}}"
                                                            tooltip="{{lang[fullHistoryRecord.actionType_vts.langKey]}}"
                                                    ></md-icon>
                                                </span>
                                                {{fullHistoryRecord.actionByInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{fullHistoryRecord.actionDate}}</td>
                                            <td md-cell>{{fullHistoryRecord.actionByOUInfo.getTranslatedName()}}</td>
                                            <td md-cell>{{fullHistoryRecord.actionToInfo.getTranslatedName()}}</td>
                                            <td md-cell>{{fullHistoryRecord.actionTypeInfo.getTranslatedName()}}</td>
                                            <td md-cell class="cms-comment">{{fullHistoryRecord.comments}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.fullHistoryGrid.limitOptions"
                                        md-limit="ctrl.fullHistoryGrid.limit"
                                        md-page="ctrl.fullHistoryGrid.page"
                                        md-total="{{ctrl.fullHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.fullHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- LINKED DOCUMENT WORKFLOW History Grid (Prev. Merged Linked Document)-->
                <md-tab label="{{lang.view_tracking_sheet_merged_linked_document_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_merged_linked_document_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_merged_linked_document_history')">
                    <md-content class="md-padding">
                        <div layout="row" class="p020">
                            <span flex></span>
                            <md-switch aria-label="{{lang.truncate_subject}}"
                                       class="m0"
                                       ng-model="ctrl.mergedLinkedDocHistoryGrid.truncateSubject"
                                       ng-change="ctrl.mergedLinkedDocHistoryGrid.setTruncateSubject($event)">
                                <span>{{lang.truncate_subject}} : </span>
                                {{ctrl.mergedLinkedDocHistoryGrid.truncateSubject ? lang.yes : lang.no }}
                            </md-switch>
                        </div>
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.mergedLinkedDocHistoryGrid.order"
                                               md-on-reorder="ctrl.sortMergedLinkedDocs">
                                        <tr md-row>
                                            <th md-column md-order-by="docSubject">
                                                <span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                            </th>
                                            <th md-column md-order-by="documentCreationDate">
                                                <span>{{lang.view_tracking_sheet_creation_date}}</span>
                                            </th>
                                            <th md-column md-order-by="mainDoc">
                                                <span>{{lang.view_tracking_sheet_main_doc}}</span>
                                            </th>
                                            <th md-column><span>{{lang.view_tracking_sheet_actions}}</span></th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="mergedLinkedDocHistory" md-row
                                            ng-repeat="mergedLinkedDocHistory in ctrl.mergedLinkedDocumentHistoryRecords | filter:ctrl.searchModelMergedLinkedDocHistory | limitTo: ctrl.mergedLinkedDocHistoryGrid.limit: ((ctrl.mergedLinkedDocHistoryGrid.page - 1) * ctrl.mergedLinkedDocHistoryGrid.limit) track by $index">
                                            <!--<td md-cell>{{mergedLinkedDocHistory.docSubject}}</td>-->
                                            <td md-cell class="subject">
                                                        <span ng-if="ctrl.mergedLinkedDocHistoryGrid.truncateSubject"
                                                              class="view-doc subject-internal" md-truncate
                                                              tooltip="{{mergedLinkedDocHistory.docSubject}}">{{mergedLinkedDocHistory.docSubject}}</span>
                                                <span ng-if="!ctrl.mergedLinkedDocHistoryGrid.truncateSubject"
                                                      class="view-doc subject-internal"
                                                      tooltip="{{mergedLinkedDocHistory.docSubject}}">{{mergedLinkedDocHistory.docSubject}}</span>
                                            </td>
                                            <td md-cell>{{mergedLinkedDocHistory.documentCreationDate}}</td>
                                            <td md-cell>
                                                <md-icon md-svg-icon="check"
                                                         ng-if="mergedLinkedDocHistory.mainDoc"
                                                         aria-label="{{lang.main_document}}"
                                                         title="{{mergedLinkedDocHistory.getTranslatedMainDocument()}}"></md-icon>
                                                <md-icon md-svg-icon="close"
                                                         ng-if="!mergedLinkedDocHistory.mainDoc"
                                                         aria-label="{{lang.main_document}}"
                                                         title="{{mergedLinkedDocHistory.getTranslatedMainDocument()}}"></md-icon>
                                            </td>
                                            <td md-cell>
                                                <div flex layout="row" layout-align="start center">
                                                    <md-button class="md-icon-button"
                                                               title="{{lang.view_tracking_sheet_view_actions}}"
                                                               ng-if="mergedLinkedDocHistory.events && mergedLinkedDocHistory.events.length"
                                                               ng-click="ctrl.viewMergedLinkedDocumentsHistoryEvents(mergedLinkedDocHistory, $event)">
                                                        <md-icon md-svg-icon="coins"></md-icon>
                                                    </md-button>
                                                    <md-icon md-svg-icon="coins"
                                                             ng-if="!mergedLinkedDocHistory.events || !mergedLinkedDocHistory.events.length"
                                                             aria-label="{{lang.view_tracking_sheet_actions}}"></md-icon>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.mergedLinkedDocHistoryGrid.limitOptions"
                                        md-limit="ctrl.mergedLinkedDocHistoryGrid.limit"
                                        md-page="ctrl.mergedLinkedDocHistoryGrid.page"
                                        md-total="{{ctrl.mergedLinkedDocumentHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.mergedLinkedDocHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Attachments History Grid -->
                <md-tab label="{{lang.view_tracking_sheet_attachments_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_attachments_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_attachments_history')">
                    <md-content class="md-padding">
                        <div layout="row" class="p020">
                            <span flex></span>
                            <md-switch aria-label="{{lang.truncate_subject}}"
                                       class="m0"
                                       ng-model="ctrl.attachmentsHistoryGrid.truncateSubject"
                                       ng-change="ctrl.attachmentsHistoryGrid.setTruncateSubject($event)">
                                <span>{{lang.truncate_subject}} : </span>
                                {{ctrl.attachmentsHistoryGrid.truncateSubject ? lang.yes : lang.no }}
                            </md-switch>
                        </div>
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.attachmentsHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataAttachmentsHistory">
                                        <tr md-row>
                                            <th md-column md-order-by="itemName">
                                                <span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('eventTypeInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionByInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="attachmentHistoryRecord" md-row
                                            ng-repeat="attachmentHistoryRecord in ctrl.attachmentsHistoryRecords | filter:ctrl.searchModelAttachmentsHistory | limitTo: ctrl.attachmentsHistoryGrid.limit: ((ctrl.attachmentsHistoryGrid.page - 1) * ctrl.attachmentsHistoryGrid.limit)  track by $index"
                                            ng-class="{'font-bold': attachmentHistoryRecord.actionByInfo.id === ctrl.employee.id}">
                                            <!--<td md-cell>{{attachmentHistoryRecord.itemName}}</td>-->
                                            <td md-cell class="subject">
                                                        <span ng-if="ctrl.attachmentsHistoryGrid.truncateSubject"
                                                              class="view-doc subject-internal" md-truncate
                                                              tooltip="{{attachmentHistoryRecord.itemName}}">{{attachmentHistoryRecord.itemName}}</span>
                                                <span ng-if="!ctrl.attachmentsHistoryGrid.truncateSubject"
                                                      class="view-doc subject-internal"
                                                      tooltip="{{attachmentHistoryRecord.itemName}}">{{attachmentHistoryRecord.itemName}}</span>
                                            </td>
                                            <td md-cell>
                                                {{attachmentHistoryRecord.eventTypeInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                {{attachmentHistoryRecord.actionByInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{attachmentHistoryRecord.actionDate}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.attachmentsHistoryGrid.limitOptions"
                                        md-limit="ctrl.attachmentsHistoryGrid.limit"
                                        md-page="ctrl.attachmentsHistoryGrid.page"
                                        md-total="{{ctrl.attachmentsHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.attachmentsHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Content View History -->
                <md-tab label="{{lang.view_tracking_sheet_content_view_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_content_view_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_content_view_history')">
                    <md-content class="md-padding">
                        <div layout="row" class="p020">
                            <span flex></span>
                            <md-switch aria-label="{{lang.truncate_subject}}"
                                       class="m0"
                                       ng-model="ctrl.contentViewHistoryGrid.truncateSubject"
                                       ng-change="ctrl.contentViewHistoryGrid.setTruncateSubject($event)">
                                <span>{{lang.truncate_subject}} : </span>
                                {{ctrl.contentViewHistoryGrid.truncateSubject ? lang.yes : lang.no }}
                            </md-switch>
                        </div>
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.contentViewHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataContentViewHistory">
                                        <tr md-row>
                                            <!--<th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                            </th>
                                            <th md-column md-order-by="ouInfo"><span>{{lang.view_tracking_sheet_organization}}</span>
                                            </th>-->
                                            <th md-column md-order-by="docSubject">
                                                <span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                            </th>
                                            <th md-column md-order-by="documentType">
                                                <span>{{lang.view_tracking_sheet_document_type}}</span>
                                            </th>
                                            <th md-column><span>{{lang.view_tracking_sheet_viewers}}</span></th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="contentViewHistoryRecord" md-row
                                            ng-repeat="contentViewHistoryRecord in ctrl.contentViewHistoryRecords | filter:ctrl.searchModelContentViewHistory | limitTo: ctrl.contentViewHistoryGrid.limit: ((ctrl.contentViewHistoryGrid.page - 1) * ctrl.contentViewHistoryGrid.limit) track by $index">
                                            <!-- <td md-cell>{{contentViewHistoryRecord.getTranslatedActionBy()}}</td>
                                             <td md-cell>{{contentViewHistoryRecord.actionDate}}</td>
                                             <td md-cell>{{contentViewHistoryRecord.docSubject}}</td>
                                             <td md-cell>{{contentViewHistoryRecord.getTranslatedOUInfo()}}</td>-->
                                            <!--<td md-cell>{{contentViewHistoryRecord.docSubject}}</td>-->
                                            <td md-cell class="subject">
                                                        <span ng-if="ctrl.contentViewHistoryGrid.truncateSubject"
                                                              class="view-doc subject-internal" md-truncate
                                                              tooltip="{{contentViewHistoryRecord.docSubject}}">{{contentViewHistoryRecord.docSubject}}</span>
                                                <span ng-if="!ctrl.contentViewHistoryGrid.truncateSubject"
                                                      class="view-doc subject-internal"
                                                      tooltip="{{contentViewHistoryRecord.docSubject}}">{{contentViewHistoryRecord.docSubject}}</span>
                                            </td>
                                            <td md-cell>{{contentViewHistoryRecord.documentType}}</td>
                                            <td md-cell>
                                                <div flex layout="row" layout-align="start center">
                                                    <md-button class="md-icon-button"
                                                               title="{{lang.view_tracking_sheet_viewers}}"
                                                               ng-if="contentViewHistoryRecord.events && contentViewHistoryRecord.events.length"
                                                               ng-click="ctrl.viewContentViewHistoryViewers(contentViewHistoryRecord, $event)">
                                                        <md-icon md-svg-icon="account-multiple"></md-icon>
                                                    </md-button>
                                                    <md-icon md-svg-icon="coins"
                                                             ng-if="!contentViewHistoryRecord.events || !contentViewHistoryRecord.events.length"
                                                             aria-label="{{lang.view_tracking_sheet_viewers}}"></md-icon>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.contentViewHistoryGrid.limitOptions"
                                        md-limit="ctrl.contentViewHistoryGrid.limit"
                                        md-page="ctrl.contentViewHistoryGrid.page"
                                        md-total="{{ctrl.contentViewHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.contentViewHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Linked Documents History Grid -->
                <md-tab label="{{lang.view_tracking_sheet_linked_documents_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_linked_documents_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_linked_documents_history')">
                    <md-content class="md-padding">
                        <div layout="row" class="p020">
                            <span flex></span>
                            <md-switch aria-label="{{lang.truncate_subject}}"
                                       class="m0"
                                       ng-model="ctrl.linkedDocumentsHistoryGrid.truncateSubject"
                                       ng-change="ctrl.linkedDocumentsHistoryGrid.setTruncateSubject($event)">
                                <span>{{lang.truncate_subject}} : </span>
                                {{ctrl.linkedDocumentsHistoryGrid.truncateSubject ? lang.yes : lang.no }}
                            </md-switch>
                        </div>
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.linkedDocumentsHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataLinkedDocumentsHistory">
                                        <tr md-row>
                                            <th md-column md-order-by="itemName">
                                                <span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('eventTypeInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_action}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionByInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column md-order-by="itemFullSerial">
                                                <span>{{lang.view_tracking_sheet_full_serial_number}}</span>
                                            </th>
                                            <!--<th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_type}}</span>
                                            </th>-->
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="linkedDocumentHistoryRecord" md-row
                                            ng-repeat="linkedDocumentHistoryRecord in ctrl.linkedDocumentsHistoryRecords | filter:ctrl.searchModelLinkedDocsHistory | limitTo: ctrl.linkedDocumentsHistoryGrid.limit: ((ctrl.linkedDocumentsHistoryGrid.page - 1) * ctrl.linkedDocumentsHistoryGrid.limit) track by $index"
                                            ng-class="{'font-bold': linkedDocumentHistoryRecord.actionByInfo.id === ctrl.employee.id}">
                                            <!--<td md-cell>{{linkedDocumentHistoryRecord.itemName}}</td>-->
                                            <td md-cell class="subject">
                                                        <span ng-if="ctrl.linkedDocumentsHistoryGrid.truncateSubject"
                                                              class="view-doc subject-internal" md-truncate
                                                              tooltip="{{linkedDocumentHistoryRecord.itemName}}">{{linkedDocumentHistoryRecord.itemName}}</span>
                                                <span ng-if="!ctrl.linkedDocumentsHistoryGrid.truncateSubject"
                                                      class="view-doc subject-internal"
                                                      tooltip="{{linkedDocumentHistoryRecord.itemName}}">{{linkedDocumentHistoryRecord.itemName}}</span>
                                            </td>
                                            <td md-cell>
                                                {{linkedDocumentHistoryRecord.eventTypeInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>
                                                {{linkedDocumentHistoryRecord.actionByInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{linkedDocumentHistoryRecord.actionDate}}</td>
                                            <td md-cell>{{linkedDocumentHistoryRecord.itemFullSerial}}</td>
                                            <!--<td md-cell>{{linkedDocumentHistoryRecord.itemType}}</td>-->
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.linkedDocumentsHistoryGrid.limitOptions"
                                        md-limit="ctrl.linkedDocumentsHistoryGrid.limit"
                                        md-page="ctrl.linkedDocumentsHistoryGrid.page"
                                        md-total="{{ctrl.linkedDocumentsHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.linkedDocumentsHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Linked Entities History Grid -->
                <md-tab label="{{lang.view_tracking_sheet_linked_entities_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_linked_entities_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_linked_entities_history')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.linkedEntitiesHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataLinkedEntitiesHistory">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionByInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('eventTypeInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action}}</span>
                                            </th>
                                            <!-- <th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_entity_identifier}}</span>
                                             </th>-->
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('itemTypeInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_entity_type}}</span>
                                            </th>
                                            <th md-column md-order-by="itemName">
                                                <span>{{lang.view_tracking_sheet_destination_full_name}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="linkedEntitiesHistoryRecord" md-row
                                            ng-repeat="linkedEntitiesHistoryRecord in ctrl.linkedEntitiesHistoryRecords | filter:ctrl.searchModelLinkedEntitiesHistory | limitTo: ctrl.linkedEntitiesHistoryGrid.limit: ((ctrl.linkedEntitiesHistoryGrid.page - 1) * ctrl.linkedEntitiesHistoryGrid.limit) track by $index"
                                            ng-class="{'font-bold': linkedEntitiesHistoryRecord.actionByInfo.id === ctrl.employee.id}">
                                            <td md-cell>
                                                {{linkedEntitiesHistoryRecord.actionByInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{linkedEntitiesHistoryRecord.actionDate}}</td>
                                            <td md-cell>
                                                {{linkedEntitiesHistoryRecord.eventTypeInfo.getTranslatedName()}}
                                            </td>
                                            <!--<td md-cell>{{linkedEntitiesHistoryRecord.getTranslatedItemType()}}</td>-->
                                            <td md-cell>
                                                {{linkedEntitiesHistoryRecord.itemTypeInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{linkedEntitiesHistoryRecord.itemName}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.linkedEntitiesHistoryGrid.limitOptions"
                                        md-limit="ctrl.linkedEntitiesHistoryGrid.limit"
                                        md-page="ctrl.linkedEntitiesHistoryGrid.page"
                                        md-total="{{ctrl.linkedEntitiesHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.linkedEntitiesHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Destination History -->
                <md-tab label="{{lang.view_tracking_sheet_destination_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_destination_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_destination_history')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.destinationHistoryGrid.order"
                                               md-on-reorder="ctrl.getSortedDataDestinationHistory">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionByInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('eventTypeInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action}}</span>
                                            </th>
                                            <!--<th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_destination_identitfier}}</span>
                                            </th>-->
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('itemInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_destination_full_name}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="destinationHistoryRecord" md-row
                                            ng-repeat="destinationHistoryRecord in ctrl.destinationHistoryRecords | filter:ctrl.searchModelDestinationHistory | limitTo: ctrl.destinationHistoryGrid.limit: ((ctrl.destinationHistoryGrid.page - 1) * ctrl.destinationHistoryGrid.limit) track by $index"
                                            ng-class="{'font-bold': destinationHistoryRecord.actionByInfo.id === ctrl.employee.id}">
                                            <td md-cell>
                                                {{destinationHistoryRecord.actionByInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{destinationHistoryRecord.actionDate}}</td>
                                            <td md-cell>
                                                {{destinationHistoryRecord.eventTypeInfo.getTranslatedName()}}
                                            </td>
                                            <!--<td md-cell></td>-->
                                            <td md-cell>
                                                {{destinationHistoryRecord.itemInfo.getTranslatedName()}}
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.destinationHistoryGrid.limitOptions"
                                        md-limit="ctrl.destinationHistoryGrid.limit"
                                        md-page="ctrl.destinationHistoryGrid.page"
                                        md-total="{{ctrl.destinationHistoryRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.destinationHistoryGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- SMS Logs -->
                <md-tab label="{{lang.view_tracking_sheet_sms_logs}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_sms_logs')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_sms_logs')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.smsLogsGrid.order">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('user', 'ApplicationUser')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('organization', 'OrganizationUnit')}}">
                                                <span>{{lang.organization}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate_vts">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column md-order-by="message">
                                                <span>{{lang.sms_message}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="smsLogRecord" md-row
                                            ng-repeat="smsLogRecord in ctrl.smsLogRecords | filter:ctrl.searchModelSMSLogs | limitTo: ctrl.smsLogsGrid.limit: ((ctrl.smsLogsGrid.page - 1) * ctrl.smsLogsGrid.limit) |orderBy:ctrl.smsLogsGrid.order  track by $index"
                                            ng-class="{'font-bold': smsLogRecord.user.id === ctrl.employee.id}">
                                            <td md-cell>
                                                {{smsLogRecord.user.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{smsLogRecord.organization.getTranslatedName()}}</td>
                                            <td md-cell>{{smsLogRecord.actionDate_vts}}</td>
                                            <td md-cell>{{smsLogRecord.message}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.smsLogsGrid.limitOptions"
                                        md-limit="ctrl.smsLogsGrid.limit"
                                        md-page="ctrl.smsLogsGrid.page"
                                        md-total="{{ctrl.smsLogRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.smsLogsGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Document Link Viewers -->
                <md-tab label="{{lang.view_tracking_sheet_document_link_viewer_history}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_document_link_viewer_history')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_document_link_viewer_history')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.documentLinkViewerGrid.order"
                                               md-on-reorder="ctrl.getSortedDataDocumentLinkViewerHistory">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="sharedToFullName">
                                                <span>{{lang.name}}</span>
                                            </th>
                                            <th md-column md-order-by="sharedToMobileNum">
                                                <span>{{lang.mobile_number}}</span>
                                            </th>
                                            <th md-column md-order-by="sharedToEmail">
                                                <span>{{lang.email}}</span>
                                            </th>
                                            <th md-column md-order-by="viewTime">
                                                <span>{{lang.action_date}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="fullHistoryRecord" md-row
                                            ng-repeat="fullHistoryRecord in ctrl.documentLinkViewerRecords | filter:ctrl.searchModelDocumentLinkHistory | limitTo: ctrl.documentLinkViewerGrid.limit: ((ctrl.documentLinkViewerGrid.page - 1) * ctrl.documentLinkViewerGrid.limit) track by $index">
                                            <td md-cell>{{fullHistoryRecord.sharedToFullName}}</td>
                                            <td md-cell>{{fullHistoryRecord.sharedToMobileNum}}</td>
                                            <td md-cell>{{fullHistoryRecord.sharedToEmail}}</td>
                                            <td md-cell>{{fullHistoryRecord.viewTime}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.documentLinkViewerGrid.limitOptions"
                                        md-limit="ctrl.documentLinkViewerGrid.limit"
                                        md-page="ctrl.documentLinkViewerGrid.page"
                                        md-total="{{ctrl.documentLinkViewerRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.documentLinkViewerGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Followup Logs -->
                <md-tab label="{{lang.view_tracking_sheet_followup_logs}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_followup_logs')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_followup_logs')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.followupLogGrid.order">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('userInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('ouInfo', 'WFOrganization')}}">
                                                <span>{{lang.organization}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionStatusInfo', 'Information')}}">
                                                <span>{{lang.status}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate_vts">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                            <th md-column md-order-by="userComment">
                                                <span>{{lang.view_tracking_sheet_comments}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="followupLog" md-row
                                            ng-repeat="followupLog in ctrl.followupLogRecords | filter:ctrl.searchModelFollowupLog | limitTo: ctrl.followupLogGrid.limit: ((ctrl.followupLogGrid.page - 1) * ctrl.followupLogGrid.limit) |orderBy:ctrl.followupLogGrid.order  track by $index"
                                            ng-class="{'font-bold': followupLog.userInfo.id === ctrl.employee.id}">
                                            <td md-cell>
                                                {{followupLog.userInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{followupLog.ouInfo.getTranslatedName()}}</td>
                                            <td md-cell>{{followupLog.actionStatusInfo.getTranslatedName()}}</td>
                                            <td md-cell>{{followupLog.actionDate_vts}}</td>
                                            <td md-cell>{{followupLog.userComment}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.followupLogGrid.limitOptions"
                                        md-limit="ctrl.followupLogGrid.limit"
                                        md-page="ctrl.followupLogGrid.page"
                                        md-total="{{ctrl.followupLogRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.followupLogGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
                <!-- Annotation Logs -->
                <md-tab label="{{lang.view_tracking_sheet_annotation_logs}}"
                        ng-if="ctrl.showTab('view_tracking_sheet_annotation_logs')"
                        md-on-select="ctrl.setCurrentTab('view_tracking_sheet_annotation_logs')">
                    <md-content class="md-padding">
                        <md-card>
                            <md-table-container>
                                <div flex scroll-directive>
                                    <table md-table>
                                        <thead md-head md-order="ctrl.annotationLogGrid.order">
                                        <tr md-row>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('eventTypeInfo','Information')}}">
                                                <span>{{lang.view_tracking_sheet_action}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('itemTypeInfo','Information')}}">
                                                <span>{{lang.annotation_type}}</span>
                                            </th>
                                            <th md-column
                                                md-order-by="{{ctrl.getSortingKey('actionByInfo', 'Information')}}">
                                                <span>{{lang.view_tracking_sheet_action_by}}</span>
                                            </th>
                                            <th md-column md-order-by="actionDate_vts">
                                                <span>{{lang.view_tracking_sheet_action_date}}</span>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody md-body>
                                        <tr md-select="followupLog" md-row
                                            ng-repeat="annotationLog in ctrl.annotationLogRecords | filter:ctrl.searchModelAnnotationLog | limitTo: ctrl.annotationLogGrid.limit: ((ctrl.annotationLogGrid.page - 1) * ctrl.annotationLogGrid.limit) |orderBy:ctrl.annotationLogGrid.order  track by $index"
                                            ng-class="{'font-bold': annotationLog.actionByInfo.id === ctrl.employee.id}">
                                            <td md-cell>{{annotationLog.eventTypeInfo.getTranslatedName()}}</td>
                                            <td md-cell>{{annotationLog.itemTypeInfo.getTranslatedName()}}</td>
                                            <td md-cell>
                                                {{annotationLog.actionByInfo.getTranslatedName()}}
                                            </td>
                                            <td md-cell>{{annotationLog.actionDate_vts}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <md-table-pagination
                                        md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                        md-limit-options="ctrl.annotationLogGrid.limitOptions"
                                        md-limit="ctrl.annotationLogGrid.limit"
                                        md-page="ctrl.annotationLogGrid.page"
                                        md-total="{{ctrl.annotationLogRecords.length}}"
                                        md-page-select
                                        md-on-paginate="ctrl.annotationLogGrid.pagingCallback"></md-table-pagination>
                            </md-table-container>
                        </md-card>
                    </md-content>
                </md-tab>
            </md-tabs>
        </div>
    </md-dialog-content>
    <md-dialog-actions class="cms-dialog-actions">
        <md-button class="md-raised md-primary" ng-click="ctrl.exportToExcel($event)"
                   ng-disabled="ctrl.checkDisabled($event)">
            {{lang.export_to_excel}}
        </md-button>
        <md-button class="md-raised md-primary" ng-click="ctrl.printSheet($event)"
                   ng-disabled="ctrl.checkDisabled($event)">
            {{lang.print}}
        </md-button>
        <md-button class="md-raised md-primary" ng-click="ctrl.printSheetFromWebPage($event)"
                   ng-disabled="ctrl.checkDisabled($event)">
            {{lang.web_print}}
        </md-button>
        <md-button class="md-raised red-text" ng-click="ctrl.closeTrackingSheetPopupFromCtrl()">
            {{lang.close}}
        </md-button>
    </md-dialog-actions>
</md-dialog>
