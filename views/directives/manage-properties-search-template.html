<fieldset class="field-set-hidden">
    <form name="docSearchForm">
        <div layout="column" ng-if="ctrl.searchType === 'basic'">
            <div layout="row">
                <!-- RegOU -->
                <md-input-container flex>
                    <label for="registryOU">{{lang.select_organization}}</label>
                    <md-select name="registryOU" id="registryOU"
                               ng-model="ctrl.document.registryOU"
                               ng-change="ctrl.onRegistryChanged()"
                               md-on-close="ctrl.clearSearchText('regOU')"
                               data-md-container-class="select-header-container">
                        <md-select-header class="select-header">
                            <input ng-model="ctrl.regOUSearchText"
                                   ng-keydown="ctrl.handleSearchKeyDown($event, 'regOU')"
                                   placeholder="{{lang.search}}"
                                   class="select-header-input">
                        </md-select-header>
                        <md-option ng-value="null">{{lang.none}}</md-option>
                        <md-option ng-value="organization.id"
                                   ng-repeat="organization in ctrl.registryOrganizations | translatedNameFilter: ctrl.regOUSearchText">
                            <span
                                    md-highlight-text="ctrl.regOUSearchText"
                                    md-highlight-flags="i">{{organization.getTranslatedName()}}</span>
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.registryOU.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Section -->
                <md-input-container flex>
                    <label for="ou">{{lang.department}}</label>
                    <md-select name="ou" id="ou"
                               ng-model="ctrl.document.ou"
                               ng-disabled="!ctrl.document.registryOU"
                               ng-readonly="!ctrl.document.registryOU"
                               md-on-close="ctrl.clearSearchText('sectionOU')"
                               data-md-container-class="select-header-container">
                        <md-select-header class="select-header">
                            <input ng-model="ctrl.sectionOUSearchText"
                                   ng-keydown="ctrl.handleSearchKeyDown($event, 'sectionOU')"
                                   placeholder="{{lang.search}}"
                                   class="select-header-input">
                        </md-select-header>
                        <md-option ng-value="null">{{lang.none}}</md-option>
                        <md-option ng-value="organization.id"
                                   ng-repeat="organization in ctrl.subOrganizations | translatedNameFilter: ctrl.sectionOUSearchText">
                            <span
                                    md-highlight-text="ctrl.sectionOUSearchText"
                                    md-highlight-flags="i">{{organization.getTranslatedName()}}</span>
                        </md-option>

                    </md-select>
                    <div ng-messages="docSearchForm.ou.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Paper/Electronic -->
                <md-input-container flex
                                    ng-if="ctrl.document.docClassName.toLowerCase() !== 'incoming' && ctrl.checkStatus('addMethod')">
                    <label for="addMethod">{{lang.document_format}}</label>
                    <md-select name="addMethod" id="addMethod"
                               ng-change="ctrl.onChangeAddMethod($event)"
                               ng-model="ctrl.document.addMethod"
                               ng-required="ctrl.checkMandatory('addMethod')">
                        <md-option ng-value="type.value"
                                   ng-repeat="type in ctrl.paperElectronicTypes">
                            {{lang[type.key]}}
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.addMethod.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Security Level -->
                <md-input-container flex ng-if="ctrl.checkStatus('securityLevel')">
                    <label for="securityLevel">{{lang.security_level}}</label>
                    <md-select name="securityLevel"
                               id="securityLevel"
                               ng-change="ctrl.onSecurityLevelChange()"
                               ng-model="ctrl.document.securityLevel"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('securityLevel')">
                        <md-option ng-value="null">{{lang.all}}</md-option>
                        <md-option ng-value="level"
                                   ng-repeat="level in ctrl.securityLevels">
                            {{level.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.securityLevel.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Priority Level -->
                <md-input-container flex ng-if="ctrl.checkStatus('priorityLevel')">
                    <label for="priorityLevel">{{lang.outgoing_priority_level}}</label>
                    <md-select name="priorityLevel"
                               id="priorityLevel"
                               ng-model="ctrl.document.priorityLevel"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('priorityLevel')">
                        <md-option ng-value="null">{{lang.all}}</md-option>
                        <md-option ng-value="priorityLevel"
                                   ng-repeat="priorityLevel in ctrl.priorityLevels">
                            {{priorityLevel.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.priorityLevel.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Document Number -->
                <md-input-container flex
                                    ng-if="ctrl.document.docClassName.toLowerCase() === 'incoming' && ctrl.checkStatus('refDocNumber') && ctrl.document.dummySearchDocClass.toLowerCase() !== 'outgoingincoming'">
                    <label for="refDocNumber">{{lang.document_number}}</label>
                    <input name="refDocNumber" id="refDocNumber"
                           ng-required="ctrl.checkMandatory('refDocNumber')"
                           ng-model="ctrl.document.refDocNumber">
                    <div ng-messages="docSearchForm.refDocNumber.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Type -->
                <md-input-container flex
                                    ng-if="ctrl.document.docClassName.toLowerCase() === 'internal' && ctrl.checkStatus('internalDocType')">
                    <label for="type">{{lang.type}}</label>
                    <md-select name="type" id="type"
                               ng-model="ctrl.document.internalDocType"
                               ng-required="ctrl.checkMandatory('internalDocType')"
                               required>
                        <md-option ng-value="type.value"
                                   ng-repeat="type in ctrl.typeOptions track by $index">
                            {{lang[type.key]}}
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.type.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
            </div>
            <div layout="row">
                <!-- Document Subject -->
                <md-input-container flex ng-if="ctrl.checkStatus('docSubject')">
                    <label for="docSubject">{{lang.document_subject}}</label>
                    <!--custom-validate-directive="AEN" -->
                    <textarea name="docSubject"
                              id="docSubject"
                              ng-model="ctrl.document.docSubject"
                              ng-required="ctrl.checkMandatory('docSubject')"></textarea>
                    <div ng-messages="docSearchForm.docSubject.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                        <div ng-message="AEN">{{lang.arabic_english_number}}</div>
                    </div>
                </md-input-container>
                <!-- Year -->
                <md-input-container flex ng-if="ctrl.checkStatus('year')">
                    <label for="year">{{lang.search_module_year}}</label>
                    <md-select name="year" id="year"
                               ng-required="ctrl.checkMandatory('year')"
                               ng-change="ctrl.setSelectedYear(true, $event)"
                               ng-model="ctrl.document.year">
                        <md-option ng-value="year"
                                   ng-repeat="year in ctrl.yearsList track by $index">
                            {{year}}
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.year.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!--incoming Date-->
                <fieldset>
                    <legend class="md-accent">{{ctrl.document.hasDocumentClass('incoming') ? lang.incoming_date :
                        lang.document_date}}
                    </legend>
                    <!-- Change Date Range -->
                    <md-input-container ng-if="ctrl.checkShowDateFields()">
                        <md-button class="md-icon-button"
                                   tooltip="{{lang.change_date_range}}"
                                   ng-click="ctrl.changeYearRange($event)">
                            <md-icon md-svg-icon="calendar"></md-icon>
                        </md-button>
                    </md-input-container>
                    <!-- Date Label From -->
                    <md-input-container ng-if="ctrl.checkShowDateFields()">
                        <label for="docDateFromLabel">{{lang.search_module_start_date}}</label>
                        <input id="docDateFromLabel" readonly="true" disabled="true" value="{{ctrl.docDateFromLabel}}">
                    </md-input-container>
                    <!-- Date Label To -->
                    <md-input-container ng-if="ctrl.checkShowDateFields()">
                        <label for="docDateToLabel">{{lang.search_module_end_date}}</label>
                        <input id="docDateToLabel" readonly="true" disabled="true" value="{{ctrl.docDateToLabel}}">
                    </md-input-container>
                </fieldset>
            </div>
            <div layout="row">
                <!-- Main Classification -->
                <md-input-container flex ng-if="ctrl.checkStatus('mainClassification')">
                    <label for="mainClassification">{{lang.outgoing_main_classification}}</label>
                    <md-select name="mainClassification"
                               id="mainClassification"
                               ng-model="ctrl.document.mainClassification"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('mainClassification')"
                               ng-change="ctrl.onChangeMainClassification($event)"
                               md-on-close="ctrl.clearSearchText('mainClassification')"
                               data-md-container-class="select-header-container">
                        <md-select-header class="select-header" layout="column">
                            <div layout="row" flex class="size-100">
                                <input ng-model="ctrl.mainClassificationSearchText"
                                       ng-keydown="ctrl.handleSearchKeyDown($event, 'mainClassification')"
                                       placeholder="{{lang.search}}"
                                       class="select-header-input">
                                <md-button ng-if="ctrl.mainClassificationSearchText"
                                           ng-click="ctrl.loadMainClassificationRecords($event)"
                                           class="select-header-icon md-icon-button"
                                           tooltip="{{lang.load_more_records}}">
                                    <md-icon md-svg-icon="magnify-plus"></md-icon>
                                </md-button>
                            </div>
                            <div class="help-text-div" ng-if="ctrl.mainClassificationSearchText">
                                {{lang.press_enter_to_load_more_records}}
                            </div>
                        </md-select-header>
                        <md-option ng-value="null">{{lang.all}}</md-option>
                        <md-option ng-value="classification.classification"
                                   ng-repeat="classification in ctrl.classifications | translatedNameFilter: ctrl.mainClassificationSearchText:'getIdNameByLanguage':'classification'">
                        <span
                                md-highlight-text="ctrl.mainClassificationSearchText"
                                md-highlight-flags="i">{{classification.classification.getIdNameByLanguage()}}</span>
                        </md-option>

                    </md-select>
                    <div ng-messages="docSearchForm.mainClassification.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Sub Classification -->
                <md-input-container flex ng-if="ctrl.checkStatus('subClassification')">
                    <label for="subClassification">{{lang.outgoing_sub_classification}}</label>
                    <md-select
                            ng-disabled="!ctrl.document.mainClassification"
                            name="subClassification"
                            id="subClassification"
                            ng-model-options="{trackBy: '$value.id'}"
                            ng-model="ctrl.document.subClassification"
                            ng-required="ctrl.checkMandatory('subClassification')"
                            md-on-close="ctrl.clearSearchText('subClassification')"
                            data-md-container-class="select-header-container">
                        <md-select-header class="select-header" layout="column">
                            <div layout="row" flex class="size-100">
                                <input ng-model="ctrl.subClassificationSearchText"
                                       ng-keydown="ctrl.handleSearchKeyDown($event, 'subClassification')"
                                       placeholder="{{lang.search}}"
                                       class="select-header-input">
                                <md-button ng-if="ctrl.subClassificationSearchText"
                                           ng-click="ctrl.loadSubClassificationRecords($event)"
                                           class="select-header-icon md-icon-button"
                                           tooltip="{{lang.load_more_records}}">
                                    <md-icon md-svg-icon="magnify-plus"></md-icon>
                                </md-button>
                            </div>
                            <div class="help-text-div" ng-if="ctrl.subClassificationSearchText">
                                {{lang.press_enter_to_load_more_records}}
                            </div>
                        </md-select-header>
                        <md-option ng-value="classification"
                                   ng-repeat="classification in ctrl.document.mainClassification.children | translatedNameFilter: ctrl.subClassificationSearchText:'getIdNameByLanguage'">
                            <span
                                    md-highlight-text="ctrl.subClassificationSearchText"
                                    md-highlight-flags="i">{{classification.getIdNameByLanguage()}}</span>
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.subClassification.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Doc serial -->
                <md-input-container flex ng-if="ctrl.checkStatus('docFullSerial')">
                    <label for="docFullSerial">{{lang.search_module_serial}}</label>
                    <input name="docFullSerial" id="docFullSerial"
                           ng-required="ctrl.checkMandatory('docFullSerial')"
                           ng-model="ctrl.document.docFullSerial">
                    <!--custom-validate-directive="{{ctrl.dynamicType('docFullSerial','type')}}"-->
                    <div ng-messages="searchOutgoingForm.docFullSerial.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
            </div>
            <div layout="row">
                <!-- Document Type -->
                <md-input-container flex ng-if="ctrl.checkStatus('docType')">
                    <label for="docType">{{lang.outgoing_document_type}}</label>
                    <md-select name="docType"
                               id="docType"
                               ng-model="ctrl.document.docType"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('docType')">
                        <md-option ng-value="documentType"
                                   ng-repeat="documentType in ctrl.documentTypes">
                            {{documentType.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.docType.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <div flex
                     ng-if="ctrl.document.hasDocumentClass('incoming') && ctrl.document.dummySearchDocClass.toLowerCase() !== 'outgoingincoming'"
                     ng-if="ctrl.checkStatus('refDocDate')">
                    <!-- ref document Date
                    && ctrl.checkStatus('refDocNumber') &&-->
                    <fieldset>
                        <legend class="md-accent">{{lang.document_date}}</legend>
                        <!-- Date Label From -->
                        <md-input-container class="cms-datepicker">
                            <label for="refDocDateFrom">{{lang.search_module_start_date}}</label>
                            <md-datepicker id="refDocDateFrom" name="refDocDateFrom" md-open-on-focus
                                           ng-required="ctrl.document.refDocDateTo"
                                           ng-model="ctrl.document.refDocDateFrom"
                                           md-max-date="ctrl.document.refDocDateTo"
                            ></md-datepicker>
                            <div ng-messages="docSearchForm.refDocDateFrom.$error">
                                <div ng-message="required">{{lang.field_required}}</div>
                            </div>
                        </md-input-container>
                        <!-- Date Label To -->
                        <md-input-container class="cms-datepicker">
                            <label for="refDocDateTo">{{lang.search_module_end_date}}</label>
                            <md-datepicker id="refDocDateTo" name="refDocDateTo" md-open-on-focus
                                           ng-required="ctrl.document.refDocDateFrom"
                                           ng-model="ctrl.document.refDocDateTo"
                                           md-min-date="ctrl.document.refDocDateFrom"
                            ></md-datepicker>
                            <div ng-messages="docSearchForm.refDocDateTo.$error">
                                <div ng-message="required">{{lang.field_required}}</div>
                            </div>
                        </md-input-container>
                    </fieldset>
                </div>
            </div>
            <div layout="row">
                <!-- followup status -->
                <md-input-container flex
                                    ng-if="ctrl.checkStatus('followupStatus') && ctrl.document.hasDocumentClass('incoming')">
                    <label for="followupStatus">{{lang.pc_followupstatus}}</label>
                    <md-select multiple name="followupStatus" id="followupStatus"
                               ng-model="ctrl.document.followupStatus"
                               ng-change="ctrl.checkFollowUpStatusValue(ctrl.document.followupStatus)"
                               ng-model-options="{trackBy: '$value.id'}">
                        <md-option ng-value="fus" ng-repeat="fus in ctrl.followupStatuses track by $index">
                            {{fus.getTranslatedName()}}
                        </md-option>
                    </md-select>
                </md-input-container>
                <!-- followup status -->
                <md-input-container flex ng-if="ctrl.document.hasDocumentClass('outgoing')">
                    <label for="followupStatus">{{lang.pc_followupstatus}}</label>
                    <md-select multiple name="followupStatus" id="followupStatus"
                               ng-model="ctrl.document.followupStatus"
                               ng-change="ctrl.checkFollowUpStatusValue(ctrl.document.followupStatus)"
                               ng-model-options="{trackBy: '$value.id'}">
                        <md-option ng-value="fus" ng-repeat="fus in ctrl.followupStatuses track by $index">
                            {{fus.getTranslatedName()}}
                        </md-option>
                    </md-select>
                </md-input-container>
                <div flex ng-if="ctrl.document.hasDocumentClass('outgoing')">
                    <!--followupDate-->
                    <fieldset>
                        <legend class="md-accent">{{lang.followup_date}}</legend>
                        <!-- Date Label From -->
                        <md-input-container flex class="cms-datepicker">
                            <label for="followUpFrom">{{lang.search_module_start_date}}</label>
                            <md-datepicker ng-disabled="!ctrl.displayFollowUpDates" id="followUpFrom"
                                           name="followUpFrom" md-open-on-focus
                                           ng-required="ctrl.document.followUpTo"
                                           ng-model="ctrl.document.followUpFrom"
                                           md-max-date="ctrl.document.followUpTo"
                            ></md-datepicker>
                            <div ng-messages="docSearchForm.followUpFrom.$error">
                                <div ng-message="required">{{lang.field_required}}</div>
                            </div>
                        </md-input-container>
                        <!-- Date Label To -->
                        <md-input-container flex class="cms-datepicker">
                            <label for="followUpTo">{{lang.search_module_end_date}}</label>
                            <md-datepicker ng-disabled="!ctrl.displayFollowUpDates" id="followUpTo" name="followUpTo"
                                           md-open-on-focus
                                           ng-required="ctrl.document.followUpFrom"
                                           ng-model="ctrl.document.followUpTo"
                                           md-min-date="ctrl.document.followUpFrom"
                            ></md-datepicker>
                            <div ng-messages="docSearchForm.followUpTo.$error">
                                <div ng-message="required">{{lang.field_required}}</div>
                            </div>
                        </md-input-container>
                    </fieldset>
                </div>
                <div flex
                     ng-if="ctrl.checkStatus('followUpDate') && (ctrl.document.hasDocumentClass('outgoing') || ctrl.document.hasDocumentClass('incoming'))">
                    <!--followupDate-->
                    <fieldset>
                        <legend class="md-accent">{{lang.followup_date}}</legend>
                        <!-- Date Label From -->
                        <md-input-container flex class="cms-datepicker">
                            <label for="followUpFrom">{{lang.search_module_start_date}}</label>
                            <md-datepicker ng-disabled="!ctrl.displayFollowUpDates" id="followUpFrom"
                                           name="followUpFrom" md-open-on-focus
                                           ng-required="ctrl.document.followUpTo"
                                           ng-model="ctrl.document.followUpFrom"
                                           md-max-date="ctrl.document.followUpTo"
                            ></md-datepicker>
                            <div ng-messages="docSearchForm.followUpFrom.$error">
                                <div ng-message="required">{{lang.field_required}}</div>
                            </div>
                        </md-input-container>
                        <!-- Date Label To -->
                        <md-input-container flex class="cms-datepicker">
                            <label for="followUpTo">{{lang.search_module_end_date}}</label>
                            <md-datepicker ng-disabled="!ctrl.displayFollowUpDates" id="followUpTo" name="followUpTo"
                                           md-open-on-focus
                                           ng-required="ctrl.document.followUpFrom"
                                           ng-model="ctrl.document.followUpTo"
                                           md-min-date="ctrl.document.followUpFrom"
                            ></md-datepicker>
                            <div ng-messages="docSearchForm.followUpTo.$error">
                                <div ng-message="required">{{lang.field_required}}</div>
                            </div>
                        </md-input-container>
                    </fieldset>
                </div>
            </div>
            <div layout="row">
                <!-- File -->
                <md-input-container flex ng-if="ctrl.checkStatus('fileId')">
                    <label for="fileId">{{lang.outgoing_file}}</label>
                    <md-select name="fileId"
                               id="fileId"
                               ng-change="ctrl.onFileChange(ctrl.document.fileId)"
                               ng-model="ctrl.document.fileId"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('fileId')"
                               md-on-close="ctrl.clearSearchText('documentFile')"
                               data-md-container-class="select-header-container">
                        <md-select-header class="select-header" layout="column">
                            <div layout="row" flex class="size-100">
                                <input ng-model="ctrl.documentFileSearchText"
                                       ng-keydown="ctrl.handleSearchKeyDown($event, 'documentFile')"
                                       placeholder="{{lang.search}}"
                                       class="select-header-input">
                                <md-button ng-if="ctrl.documentFileSearchText"
                                           ng-click="ctrl.loadDocumentFilesRecords($event)"
                                           class="select-header-icon md-icon-button"
                                           tooltip="{{lang.load_more_records}}">
                                    <md-icon md-svg-icon="magnify-plus"></md-icon>
                                </md-button>
                            </div>
                            <div class="help-text-div" ng-if="ctrl.documentFileSearchText">
                                {{lang.press_enter_to_load_more_records}}
                            </div>
                        </md-select-header>
                        <md-option ng-value="null">{{lang.all}}</md-option>
                        <md-option ng-value="file.file"
                                   ng-repeat="file in ctrl.documentFiles | translatedNameFilter: ctrl.documentFileSearchText:null:'file'">
                            <span
                                    md-highlight-text="ctrl.documentFileSearchText"
                                    md-highlight-flags="i">{{file.file.getTranslatedName()}}</span>
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.fileId.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- File Code -->
                <md-input-container flex ng-if="ctrl.checkStatus('fileCode')">
                    <label for="fileCode">{{lang.outgoing_file_code}}</label>
                    <input name="fileCode"
                           id="fileCode"
                           ng-enter="ctrl.onFileCodeChanged()"
                           ng-model="ctrl.document.fileCode"
                           ng-required="ctrl.checkMandatory('fileCode')">
                    <div ng-messages="docSearchForm.fileCode.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- File Serial -->
                <md-input-container flex ng-if="ctrl.checkStatus('fileSerial')">
                    <label for="fileSerial">{{lang.outgoing_file_serial}}</label>
                    <input name="fileSerial" custom-validate-directive="number"
                           id="fileSerial"
                           ng-model="ctrl.document.fileSerial"
                           ng-required="ctrl.checkMandatory('fileSerial')">
                    <div ng-messages="docSearchForm.fileSerial.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                        <div ng-message="number">{{lang.numberonly}}</div>
                    </div>
                </md-input-container>
            </div>

            <div flex ng-if="ctrl.document.hasDocumentClass('outgoing')">
                <!--exportDate-->
                <fieldset>
                    <legend class="md-accent">{{lang.export_date}}</legend>
                    <!-- Date Label From -->
                    <md-input-container flex class="cms-datepicker">
                        <label for="exportDateFrom">{{lang.search_module_start_date}}</label>
                        <md-datepicker id="exportDateFrom"
                                       name="exportDateFrom" md-open-on-focus
                                       ng-required="ctrl.document.exportDateTo"
                                       ng-model="ctrl.document.exportDateFrom"
                                       md-max-date="ctrl.document.exportDateTo"
                        ></md-datepicker>
                        <div ng-messages="docSearchForm.exportDateFrom.$error">
                            <div ng-message="required">{{lang.field_required}}</div>
                        </div>
                    </md-input-container>
                    <!-- Date Label To -->
                    <md-input-container flex class="cms-datepicker">
                        <label for="exportDateTo">{{lang.search_module_end_date}}</label>
                        <md-datepicker id="exportDateTo" name="exportDateTo"
                                       md-open-on-focus
                                       ng-required="ctrl.document.exportDateFrom"
                                       ng-model="ctrl.document.exportDateTo"
                                       md-min-date="ctrl.document.exportDateFrom"
                        ></md-datepicker>
                        <div ng-messages="docSearchForm.exportDateTo.$error">
                            <div ng-message="required">{{lang.field_required}}</div>
                        </div>
                    </md-input-container>
                </fieldset>
            </div>

            <div layout="row">
                <!-- Notes -->
                <md-input-container flex ng-if="ctrl.checkStatus('docNotes')">
                    <label for="docNotes">{{lang.properties_notes}}</label>
                    <textarea ng-required="ctrl.checkMandatory('docNotes')" name="docNotes" id="docNotes"
                              ng-model="ctrl.document.docNotes" rows="5"></textarea>
                </md-input-container>
            </div>
        </div>

        <div layout="column" ng-if="ctrl.searchType === 'advanced'">
            <div layout="row"
                 ng-if="ctrl.document.docClassName.toLowerCase() !== 'internal'
                        && ctrl.document.docClassName.toLowerCase() !== 'general'
                        && ctrl.document.docClassName.toLowerCase() !== 'correspondence'">
                <manage-correspondence-sites-search-directive flex
                                                              empty-sub-records="ctrl.emptyResults"
                                                              selected-site-type="ctrl.document.siteType"
                                                              document-class="ctrl.document.docClassName"
                                                              sites-info-to="ctrl.document.sitesInfoTo"
                                                              sites-info-c-c="ctrl.document.sitesInfoCC"
                                                              sites-info-incoming="ctrl.document.sitesInfoIncoming">
                </manage-correspondence-sites-search-directive>
            </div>

            <!-- Linked Entity -->
            <div layout="row" ng-if="ctrl.checkStatus('linkedEntities')">
                <!-- Entity Type Drop down -->
                <md-input-container flex>
                    <label for="selectedEntityType">{{lang.linked_entity}}</label>
                    <md-select name="selectedEntityType"
                               id="selectedEntityType"
                               ng-change="ctrl.openEntityTypePopup(true, $event)"
                               ng-model="ctrl.document.selectedEntityType"
                               ng-required="ctrl.checkMandatory('linkedEntities')">
                        <md-option ng-value="null">{{lang.none}}</md-option>
                        <md-option ng-value="entityType"
                                   ng-repeat="entityType in ctrl.entityTypesArray">
                            {{entityType.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.selectedEntityType.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>

                <!-- Change Linked Entity Type Values -->
                <md-input-container>
                    <md-button class="md-icon-button"
                               ng-if="ctrl.document.selectedEntityType && !!ctrl.linkedEntityValueName"
                               tooltip="{{lang.change_entity_type}}"
                               tooltip-direction="{{lang.current === 'en' ? 'left' : 'right'}}"
                               ng-click="ctrl.openEntityTypePopup(false, $event)">
                        <md-icon md-svg-icon="pencil"></md-icon>
                    </md-button>
                </md-input-container>

                <!-- Name of linked entity -->
                <md-input-container flex ng-if="ctrl.document.selectedEntityType && !!ctrl.linkedEntityValueName">
                    <label for="linkedEntityName">{{lang.name}}</label>
                    <input name="linkedEntityName" id="linkedEntityName"
                           ng-required="ctrl.checkMandatory('linkedEntities')"
                           ng-model="ctrl.linkedEntityValueName"
                           ng-disabled="true" ng-readonly="true">
                    <div ng-messages="docSearchForm.linkedEntities.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
            </div>

            <!-- Approver -->
            <div layout="row"
                 ng-if="ctrl.document.docClassName.toLowerCase() !== 'incoming'
                 && ctrl.document.docClassName.toLowerCase() !== 'general'
                 && ctrl.document.docClassName.toLowerCase() !== 'correspondence'
                 && ctrl.document.addMethod !== 1 && ctrl.checkStatus('approvers')">
                <!-- Approver drop down -->
                <md-input-container flex>
                    <label for="approvers">{{lang.approver}}</label>
                    <md-select name="approvers" id="approvers"
                               ng-model="ctrl.document.approvers"
                               ng-required="ctrl.checkMandatory('approvers')"
                               md-on-close="ctrl.clearSearchText('approver')"
                               data-md-container-class="select-header-container">
                        <md-select-header class="select-header">
                            <input ng-model="ctrl.approverSearchText"
                                   ng-keydown="ctrl.handleSearchKeyDown($event)"
                                   placeholder="{{lang.search}}"
                                   class="select-header-input">
                        </md-select-header>
                        <md-option ng-value="null">{{lang.none}}</md-option>
                        <md-option
                                ng-repeat="approver in ctrl.approvers | translatedNameFilter: ctrl.approverSearchText:'getAppUserAndOuTranslate'"
                                ng-value="approver">
                            <span
                                    md-highlight-text="ctrl.approverSearchText"
                                    md-highlight-flags="i">{{approver.getAppUserAndOuTranslate()}}</span>
                        </md-option>
                    </md-select>
                    <div ng-messages="docSearchForm.approvers.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Approver Date From -->
                <md-input-container class="cms-datepicker">
                    <label for="approverFrom">{{lang.search_module_start_date}}</label>
                    <md-datepicker id="approverFrom" name="approverFrom" md-open-on-focus
                                   ng-required="ctrl.document.approveDateTo"
                                   ng-model="ctrl.document.approveDateFrom"
                                   md-max-date="ctrl.document.approveDateTo"
                    ></md-datepicker>
                    <div ng-messages="docSearchForm.approverFrom.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <!-- Approver Date To -->
                <md-input-container class="cms-datepicker">
                    <label for="approverTo">{{lang.search_module_end_date}}</label>
                    <md-datepicker id="approverTo" name="approverTo" md-open-on-focus
                                   ng-required="ctrl.document.approveDateFrom"
                                   ng-model="ctrl.document.approveDateTo"
                                   md-min-date="ctrl.document.approveDateFrom"
                    ></md-datepicker>
                    <div ng-messages="docSearchForm.approverTo.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
            </div>

            <div flex layout="row" ng-if="ctrl.document.docClassName.toLowerCase() !== 'internal'
                            && ctrl.document.docClassName.toLowerCase() !== 'general'
                            && ctrl.document.docClassName.toLowerCase() !== 'correspondence'">

                <md-input-container flex>
                    <label for="fromRegOUId">{{lang.from_reg_ou}}</label>
                    <md-select name="fromRegOUId" id="fromRegOUId"
                               aria-label="{{lang.from_reg_ou}}"
                               ng-model="ctrl.document.fromRegOUId"
                               ng-model-options="{trackBy: '$value'}"
                               md-on-close="ctrl.clearSearchText('fromDept')"
                               data-md-container-class="select-header-container">
                        <md-select-header class="select-header">
                            <input ng-model="ctrl.fromDeptSearchText"
                                   ng-keydown="ctrl.handleSearchKeyDown($event)"
                                   placeholder="{{lang.search}}"
                                   class="select-header-input">
                        </md-select-header>
                        <md-option ng-value="null">{{lang.none}}</md-option>
                        <md-option ng-repeat="ou in ctrl.organizations | translatedNameFilter: ctrl.fromDeptSearchText"
                                   ng-if="ou.id !== ctrl.document.toRegOUId && ou.hasRegistry"
                                   ng-value="ou.id">
                            <span
                                    md-highlight-text="ctrl.fromDeptSearchText"
                                    md-highlight-flags="i">{{ou.getTranslatedName()}}</span>
                        </md-option>
                    </md-select>
                </md-input-container>
                <md-input-container flex>
                    <label for="toRegOUId">{{lang.to_reg_ou}}</label>
                    <md-select name="toRegOUId" id="toRegOUId"
                               aria-label="{{lang.to_reg_ou}}"
                               ng-model="ctrl.document.toRegOUId"
                               ng-model-options="{trackBy: '$value'}"
                               md-on-close="ctrl.clearSearchText('toDept')"
                               data-md-container-class="select-header-container">
                        <md-select-header class="select-header">
                            <input ng-model="ctrl.toDeptSearchText"
                                   ng-keydown="ctrl.handleSearchKeyDown($event)"
                                   placeholder="{{lang.search}}"
                                   class="select-header-input">
                        </md-select-header>
                        <md-option ng-value="null">{{lang.none}}</md-option>
                        <md-option ng-repeat="ou in ctrl.organizations | translatedNameFilter: ctrl.toDeptSearchText"
                                   ng-if="ou.id !== ctrl.document.fromRegOUId && ou.hasRegistry"
                                   ng-value="ou.id">
                            <span
                                    md-highlight-text="ctrl.toDeptSearchText"
                                    md-highlight-flags="i">{{ou.getTranslatedName()}}</span>
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>

            <div layout="row" ng-if="ctrl.checkStatus('docserial')">
                <!-- Serial Number From -->
                <md-input-container>
                    <label for="serialNoFrom">{{lang.search_module_serial_from}}</label>
                    <input id="serialNoFrom" name="serialNoFrom" ng-required="ctrl.document.serialNoTo"
                           min="1" max="ctrl.getMinMaxSerialNumberValues('from', 'max').value"
                           ng-change="ctrl.setSerialNumber($event)"
                           custom-validate-directive="number"
                           min-max-number-directive ng-model="ctrl.document.serialNoFrom">
                    <div ng-messages="docSearchForm.serialNoFrom.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                        <div ng-message="number">{{lang.numberonly}}</div>
                        <div ng-message="min">{{lang.min_number.change({number: ctrl.getMinMaxSerialNumberValues('from',
                            'min').errorValue})}}
                        </div>
                        <div ng-message="max">{{lang.max_number.change({number: ctrl.getMinMaxSerialNumberValues('from',
                            'max').errorValue})}}
                        </div>
                    </div>
                </md-input-container>
                <!-- Serial Number To -->
                <md-input-container>
                    <label for="serialNoTo">{{lang.search_module_serial_to}}</label>
                    <input id="serialNoTo" name="serialNoTo" ng-required="ctrl.document.serialNoFrom"
                           ng-change="ctrl.setSerialNumber($event)"
                           custom-validate-directive="number" min="ctrl.getMinMaxSerialNumberValues('to', 'min').value"
                           min-max-number-directive ng-model="ctrl.document.serialNoTo">
                    <div ng-messages="docSearchForm.serialNoTo.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                        <div ng-message="number">{{lang.numberonly}}</div>
                        <div ng-message="min">{{lang.min_number.change({number: ctrl.getMinMaxSerialNumberValues('to',
                            'min').errorValue})}}
                        </div>
                    </div>
                </md-input-container>
            </div>
        </div>
    </form>
</fieldset>
