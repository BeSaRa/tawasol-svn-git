<md-dialog class="dialog-extend mw60" id="view-tracking-sheet-dialog" aria-label="{{lang[ctrl.popupHeading]}}">
    <div layout="column">
        <md-toolbar layout="row" layout-align="start center">
            <span class="p20">{{ctrl.popupHeading}}</span>
            <close-dialog-directive></close-dialog-directive>
        </md-toolbar>
        <md-content scroll-directive>
            <form name="trackingSheetForm" autocomplete="off">
                <!-- SINGLE GRID VIEW -->
                <div md-dynamic-height ng-if="ctrl.gridType !== 'tabs'">
                    <!-- Workflow History Grid-->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_work_flow_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.workflowHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="userFromInfo"><span>{{lang.view_tracking_sheet_sender}}</span>
                                                </th>
                                                <th md-column md-order-by="userToInfo"><span>{{lang.view_tracking_sheet_receiver}}</span>
                                                </th>
                                                <th md-column md-order-by="workflowActionInfo"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <th md-column md-order-by="documentCreationDate_vts"><span>{{lang.view_tracking_sheet_creation_date}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate_vts"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="comments"><span>{{lang.view_tracking_sheet_comments}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="workflowHistoryRecord" md-row
                                                ng-repeat="workflowHistoryRecord in ctrl.workflowHistoryRecords | filter:ctrl.searchModelWorkflowHistory | limitTo: ctrl.workflowHistoryGrid.limit: ((ctrl.workflowHistoryGrid.page - 1) * ctrl.workflowHistoryGrid.limit) |orderBy:ctrl.workflowHistoryGrid.order  track by $index">
                                                <td md-cell>{{workflowHistoryRecord.getTranslatedUserFrom()}}</td>
                                                <td md-cell>{{workflowHistoryRecord.getTranslatedUserTo()}}</td>
                                                <td md-cell>{{workflowHistoryRecord.getTranslatedAction()}}</td>
                                                <td md-cell>{{workflowHistoryRecord.documentCreationDate_vts}}</td>
                                                <td md-cell>{{workflowHistoryRecord.actionDate_vts}}</td>
                                                <td md-cell>{{workflowHistoryRecord.comments}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.workflowHistoryGrid.limitOptions"
                                                md-limit="ctrl.workflowHistoryGrid.limit"
                                                md-page="ctrl.workflowHistoryGrid.page"
                                                md-total="{{ctrl.workflowHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- Linked Documents History Grid -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_linked_documents_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.linkedDocumentsHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="itemName"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="itemFullSerial"><span>{{lang.view_tracking_sheet_full_serial_number}}</span>
                                                </th>
                                                <!--<th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_type}}</span>
                                                </th>-->
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="linkedDocumentHistoryRecord" md-row
                                                ng-repeat="linkedDocumentHistoryRecord in ctrl.linkedDocumentsHistoryRecords | filter:ctrl.searchModelLinkedDocsHistory | limitTo: ctrl.linkedDocumentsHistoryGrid.limit: ((ctrl.linkedDocumentsHistoryGrid.page - 1) * ctrl.linkedDocumentsHistoryGrid.limit) |orderBy:ctrl.linkedDocumentsHistoryGrid.order  track by $index">
                                                <td md-cell>{{linkedDocumentHistoryRecord.itemName}}</td>
                                                <td md-cell>{{linkedDocumentHistoryRecord.eventTypeInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{linkedDocumentHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{linkedDocumentHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{linkedDocumentHistoryRecord.itemFullSerial}}</td>
                                                <!--<td md-cell>{{linkedDocumentHistoryRecord.itemType}}</td>-->
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.linkedDocumentsHistoryGrid.limitOptions"
                                                md-limit="ctrl.linkedDocumentsHistoryGrid.limit"
                                                md-page="ctrl.linkedDocumentsHistoryGrid.page"
                                                md-total="{{ctrl.linkedDocumentsHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- Attachments History Grid -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_attachments_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.attachmentsHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="itemName"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="attachmentHistoryRecord" md-row
                                                ng-repeat="attachmentHistoryRecord in ctrl.attachmentsHistoryRecords | filter:ctrl.searchModelAttachmentsHistory | limitTo: ctrl.attachmentsHistoryGrid.limit: ((ctrl.attachmentsHistoryGrid.page - 1) * ctrl.attachmentsHistoryGrid.limit) |orderBy:ctrl.attachmentsHistoryGrid.order  track by $index">
                                                <td md-cell>{{attachmentHistoryRecord.itemName}}</td>
                                                <td md-cell>{{attachmentHistoryRecord.getTranslatedAction()}}</td>
                                                <td md-cell>{{attachmentHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{attachmentHistoryRecord.actionDate }}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.attachmentsHistoryGrid.limitOptions"
                                                md-limit="ctrl.attachmentsHistoryGrid.limit"
                                                md-page="ctrl.attachmentsHistoryGrid.page"
                                                md-total="{{ctrl.attachmentsHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- Merged Linked Document History Grid -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_merged_linked_document_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.mergedLinkedDocHistoryGrid.order"
                                                   md-on-reorder="ctrl.sortMergedLinkedDocs()">
                                            <tr md-row>
                                                <th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="documentCreationDate"><span>{{lang.view_tracking_sheet_creation_date}}</span>
                                                </th>
                                                <th md-column md-order-by="mainDoc"><span>{{lang.view_tracking_sheet_main_doc}}</span>
                                                </th>
                                                <th md-column><span>{{lang.view_tracking_sheet_actions}}</span></th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="mergedLinkedDocHistory" md-row
                                                ng-repeat="mergedLinkedDocHistory in ctrl.mergedLinkedDocumentHistoryRecords | filter:ctrl.searchModelMergedLinkedDocHistory | limitTo: ctrl.mergedLinkedDocHistoryGrid.limit: ((ctrl.mergedLinkedDocHistoryGrid.page - 1) * ctrl.mergedLinkedDocHistoryGrid.limit) |orderBy:ctrl.mergedLinkedDocHistoryGrid.order  track by $index">
                                                <td md-cell>{{mergedLinkedDocHistory.docSubject}}</td>
                                                <td md-cell>{{mergedLinkedDocHistory.documentCreationDate}}</td>
                                                <td md-cell>
                                                    <md-icon md-svg-icon="check"
                                                             ng-if="mergedLinkedDocHistory.mainDoc"
                                                             aria-label="{{lang.main_document}}"
                                                             title="{{mergedLinkedDocHistory.getTranslatedMainDocument()}}"></md-icon>
                                                    <md-icon md-svg-icon="close"
                                                             ng-if="!mergedLinkedDocHistory.mainDoc"
                                                             aria-label="{{lang.main_document}}"
                                                             title="{{mergedLinkedDocHistory.getTranslatedMainDocument()}}"></md-icon>
                                                </td>
                                                <td md-cell>
                                                    <div flex layout="row" layout-align="start center">
                                                        <md-button class="md-icon-button"
                                                                   title="{{lang.view_tracking_sheet_view_actions}}"
                                                                   ng-if="mergedLinkedDocHistory.events && mergedLinkedDocHistory.events.length"
                                                                   ng-click="ctrl.viewMergedLinkedDocumentsHistoryEvents(mergedLinkedDocHistory, $event)">
                                                            <md-icon md-svg-icon="coins"></md-icon>
                                                        </md-button>
                                                        <md-icon md-svg-icon="coins"
                                                                 ng-if="!mergedLinkedDocHistory.events || !mergedLinkedDocHistory.events.length"
                                                                 aria-label="{{lang.actions}}"></md-icon>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.mergedLinkedDocHistoryGrid.limitOptions"
                                                md-limit="ctrl.mergedLinkedDocHistoryGrid.limit"
                                                md-page="ctrl.mergedLinkedDocHistoryGrid.page"
                                                md-total="{{ctrl.mergedLinkedDocumentHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- Linked Entities History Grid -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_linked_entities_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.linkedEntitiesHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <!-- <th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_entity_identifier}}</span>
                                                 </th>-->
                                                <th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_entity_type}}</span>
                                                </th>
                                                <th md-column md-order-by="itemName"><span>{{lang.view_tracking_sheet_destination_full_name}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="linkedEntitiesHistoryRecord" md-row
                                                ng-repeat="linkedEntitiesHistoryRecord in ctrl.linkedEntitiesHistoryRecords | filter:ctrl.searchModelLinkedEntitiesHistory | limitTo: ctrl.linkedEntitiesHistoryGrid.limit: ((ctrl.linkedEntitiesHistoryGrid.page - 1) * ctrl.linkedEntitiesHistoryGrid.limit) |orderBy:ctrl.linkedEntitiesHistoryGrid.order  track by $index">
                                                <td md-cell>{{linkedEntitiesHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{linkedEntitiesHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{linkedEntitiesHistoryRecord.getTranslatedAction()}}</td>
                                                <!--<td md-cell>{{linkedEntitiesHistoryRecord.getTranslatedItemType()}}</td>-->
                                                <td md-cell>{{linkedEntitiesHistoryRecord.itemTypeInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{linkedEntitiesHistoryRecord.itemName}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.linkedEntitiesHistoryGrid.limitOptions"
                                                md-limit="ctrl.linkedEntitiesHistoryGrid.limit"
                                                md-page="ctrl.linkedEntitiesHistoryGrid.page"
                                                md-total="{{ctrl.linkedEntitiesHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- Destination History -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_destination_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.destinationHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <!--<th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_destination_identitfier}}</span>
                                                </th>-->
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_destination_full_name}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="destinationHistoryRecord" md-row
                                                ng-repeat="destinationHistoryRecord in ctrl.destinationHistoryRecords | filter:ctrl.searchModelDestinationHistory | limitTo: ctrl.destinationHistoryGrid.limit: ((ctrl.destinationHistoryGrid.page - 1) * ctrl.destinationHistoryGrid.limit) |orderBy:ctrl.destinationHistoryGrid.order  track by $index">
                                                <td md-cell>{{destinationHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{destinationHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{destinationHistoryRecord.getTranslatedAction()}}</td>
                                                <!--<td md-cell></td>-->
                                                <td md-cell>{{destinationHistoryRecord.itemName}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.destinationHistoryGrid.limitOptions"
                                                md-limit="ctrl.destinationHistoryGrid.limit"
                                                md-page="ctrl.destinationHistoryGrid.page"
                                                md-total="{{ctrl.destinationHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- Content View History -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_content_view_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.contentViewHistoryGrid.order">
                                            <tr md-row>
                                                <!--<th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="ouInfo"><span>{{lang.view_tracking_sheet_organization}}</span>
                                                </th>-->
                                                <th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="documentType"><span>{{lang.view_tracking_sheet_document_type}}</span>
                                                </th>
                                                <th md-column><span>{{lang.view_tracking_sheet_viewers}}</span></th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="contentViewHistoryRecord" md-row
                                                ng-repeat="contentViewHistoryRecord in ctrl.contentViewHistoryRecords | filter:ctrl.searchModelContentViewHistory | limitTo: ctrl.contentViewHistoryGrid.limit: ((ctrl.contentViewHistoryGrid.page - 1) * ctrl.contentViewHistoryGrid.limit) |orderBy:ctrl.contentViewHistoryGrid.order  track by $index">
                                               <!-- <td md-cell>{{contentViewHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{contentViewHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{contentViewHistoryRecord.docSubject}}</td>
                                                <td md-cell>{{contentViewHistoryRecord.getTranslatedOUInfo()}}</td>-->
                                                <td md-cell>{{contentViewHistoryRecord.docSubject}}</td>
                                                <td md-cell>{{contentViewHistoryRecord.documentType}}</td>
                                                <td md-cell>
                                                    <div flex layout="row" layout-align="start center">
                                                        <md-button class="md-icon-button"
                                                                   title="{{lang.view_tracking_sheet_viewers}}"
                                                                   ng-if="contentViewHistoryRecord.events && contentViewHistoryRecord.events.length"
                                                                   ng-click="ctrl.viewContentViewHistoryEvents(contentViewHistoryRecord, $event)">
                                                            <md-icon md-svg-icon="account-multiple"></md-icon>
                                                        </md-button>
                                                        <md-icon md-svg-icon="coins"
                                                                 ng-if="!contentViewHistoryRecord.events || !contentViewHistoryRecord.events.length"
                                                                 aria-label="{{lang.view_tracking_sheet_viewers}}"></md-icon>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.contentViewHistoryGrid.limitOptions"
                                                md-limit="ctrl.contentViewHistoryGrid.limit"
                                                md-page="ctrl.contentViewHistoryGrid.page"
                                                md-total="{{ctrl.contentViewHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- SMS Logs -->
                   <!-- <div ng-if="ctrl.heading === 'view_tracking_sheet_sms_logs'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.smsLogsGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="message"><span>{{lang.sms_message}}</span>
                                                </th>
                                                <th md-column md-order-by="smsTemplateId">
                                                    <span>{{lang.sms_template}}</span>
                                                </th>
                                                <th md-column md-order-by="ouId"><span>{{lang.organizations}}</span>
                                                </th>
                                                <th md-column md-order-by="actionBy"><span>{{lang.username}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="smsLogRecord" md-row
                                                ng-repeat="smsLogRecord in ctrl.smsLogRecords | filter:ctrl.searchModelSMSLogs | limitTo: ctrl.smsLogsGrid.limit: ((ctrl.smsLogsGrid.page - 1) * ctrl.smsLogsGrid.limit) |orderBy:ctrl.smsLogsGrid.order  track by $index">
                                                <td md-cell>{{smsLogRecord.message}}</td>
                                                <td md-cell>{{smsLogRecord.smsTemplateId}}</td>
                                                <td md-cell>{{smsLogRecord.ouId}}</td>
                                                <td md-cell>{{smsLogRecord.actionBy}}</td>
                                                <td md-cell>{{smsLogRecord.actionDate}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.smsLogsGrid.limitOptions"
                                                md-limit="ctrl.smsLogsGrid.limit"
                                                md-page="ctrl.smsLogsGrid.page"
                                                md-total="{{ctrl.smsLogRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>-->
                    <!-- Outgoing Delivery Reports / Messaging History -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_outgoing_delivery_reports'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.outgoingDeliveryReportGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="sentByIdInfo"><span>{{lang.view_tracking_sheet_sent_by}}</span></th>
                                                <th md-column md-order-by="mainSiteFromIdInfo"><span>{{lang.view_tracking_sheet_main_site_from}}</span></th>
                                                <th md-column md-order-by="subSiteFromIdInfo"><span>{{lang.view_tracking_sheet_sub_site_from}}</span></th>
                                                <th md-column md-order-by="priorityLevelInfo"><span>{{lang.view_tracking_sheet_priority_level}}</span></th>
                                                <th md-column md-order-by="messageStatusInfo"><span>{{lang.view_tracking_sheet_message_status}}</span></th>
                                                <th md-column md-order-by="receivedByIdInfo"><span>{{lang.view_tracking_sheet_received_by}}</span></th>
                                                <th md-column md-order-by="mainSiteToIdInfo"><span>{{lang.view_tracking_sheet_main_site_to}}</span></th>
                                                <th md-column md-order-by="subSiteToIdInfo"><span>{{lang.view_tracking_sheet_sub_site_to}}</span></th>
                                                <th md-column md-order-by="comment"><span>{{lang.view_tracking_sheet_comments}}</span></th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="outgoingDeliveryReportRecord" md-row
                                                ng-repeat="outgoingDeliveryReportRecord in ctrl.outgoingDeliveryReportRecords | filter:ctrl.searchModelOutgoingDeliveryReports | limitTo: ctrl.outgoingDeliveryReportGrid.limit: ((ctrl.outgoingDeliveryReportGrid.page - 1) * ctrl.outgoingDeliveryReportGrid.limit) |orderBy:ctrl.outgoingDeliveryReportGrid.order  track by $index">
                                                <td md-cell>{{outgoingDeliveryReportRecord.sentByIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.mainSiteFromIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.subSiteFromIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.priorityLevelInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.messageStatusInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.receivedByIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.mainSiteToIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.subSiteToIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.comment}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.outgoingDeliveryReportGrid.limitOptions"
                                                md-limit="ctrl.outgoingDeliveryReportGrid.limit"
                                                md-page="ctrl.outgoingDeliveryReportGrid.page"
                                                md-total="{{ctrl.outgoingDeliveryReportRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                    <!-- Full History -->
                    <div ng-if="ctrl.heading === 'view_tracking_sheet_full_history'">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.fullHistoryGrid.order">
                                            <tr md-row>
                                                <!--<th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>-->
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="updateByInfo"><span>{{lang.view_tracking_sheet_action_by_department}}</span>
                                                </th>
                                                <th md-column md-order-by="updatedOn"><span>{{lang.view_tracking_sheet_action_type}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="fullHistoryRecord" md-row
                                                ng-repeat="fullHistoryRecord in ctrl.fullHistoryRecords | filter:ctrl.searchModelFullHistory | limitTo: ctrl.fullHistoryGrid.limit: ((ctrl.fullHistoryGrid.page - 1) * ctrl.fullHistoryGrid.limit) |orderBy:ctrl.fullHistoryGrid.order  track by $index">
                                                <!--<td md-cell>{{fullHistoryRecord.docSubject}}</td>-->
                                                <td md-cell>{{fullHistoryRecord.actionByInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{fullHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{fullHistoryRecord.actionByOUInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{fullHistoryRecord.actionTypeInfo.getTranslatedName()}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.fullHistoryGrid.limitOptions"
                                                md-limit="ctrl.fullHistoryGrid.limit"
                                                md-page="ctrl.fullHistoryGrid.page"
                                                md-total="{{ctrl.fullHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </div>
                </div>

                <!-- TABS GRID VIEW -->
                <md-tabs md-dynamic-height ng-if="ctrl.gridType === 'tabs'">
                    <!-- Workflow History Tab -->
                    <md-tab label="{{lang.view_tracking_sheet_work_flow_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_work_flow_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_work_flow_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.workflowHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="userFromInfo"><span>{{lang.view_tracking_sheet_sender}}</span>
                                                </th>
                                                <th md-column md-order-by="userToInfo"><span>{{lang.view_tracking_sheet_receiver}}</span>
                                                </th>
                                                <th md-column md-order-by="workflowActionInfo"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <th md-column md-order-by="documentCreationDate_vts"><span>{{lang.view_tracking_sheet_creation_date}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate_vts"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="comments"><span>{{lang.view_tracking_sheet_comments}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="workflowHistoryRecord" md-row
                                                ng-repeat="workflowHistoryRecord in ctrl.workflowHistoryRecords | filter:ctrl.searchModelWorkflowHistory | limitTo: ctrl.workflowHistoryGrid.limit: ((ctrl.workflowHistoryGrid.page - 1) * ctrl.workflowHistoryGrid.limit) |orderBy:ctrl.workflowHistoryGrid.order  track by $index">
                                                <td md-cell>{{workflowHistoryRecord.getTranslatedUserFrom()}}</td>
                                                <td md-cell>{{workflowHistoryRecord.getTranslatedUserTo()}}</td>
                                                <td md-cell>{{workflowHistoryRecord.getTranslatedAction()}}</td>
                                                <td md-cell>{{workflowHistoryRecord.documentCreationDate_vts}}</td>
                                                <td md-cell>{{workflowHistoryRecord.actionDate_vts}}</td>
                                                <td md-cell>{{workflowHistoryRecord.comments}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.workflowHistoryGrid.limitOptions"
                                                md-limit="ctrl.workflowHistoryGrid.limit"
                                                md-page="ctrl.workflowHistoryGrid.page"
                                                md-total="{{ctrl.workflowHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- Linked Documents History Grid -->
                    <md-tab label="{{lang.view_tracking_sheet_linked_documents_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_linked_documents_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_linked_documents_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.linkedDocumentsHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="itemName"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="itemFullSerial"><span>{{lang.view_tracking_sheet_full_serial_number}}</span>
                                                </th>
                                                <!--<th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_type}}</span>
                                                </th>-->
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="linkedDocumentHistoryRecord" md-row
                                                ng-repeat="linkedDocumentHistoryRecord in ctrl.linkedDocumentsHistoryRecords | filter:ctrl.searchModelLinkedDocsHistory | limitTo: ctrl.linkedDocumentsHistoryGrid.limit: ((ctrl.linkedDocumentsHistoryGrid.page - 1) * ctrl.linkedDocumentsHistoryGrid.limit) |orderBy:ctrl.linkedDocumentsHistoryGrid.order  track by $index">
                                                <td md-cell>{{linkedDocumentHistoryRecord.itemName}}</td>
                                                <td md-cell>
                                                    {{linkedDocumentHistoryRecord.eventTypeInfo.getTranslatedName()}}
                                                </td>
                                                <td md-cell>{{linkedDocumentHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{linkedDocumentHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{linkedDocumentHistoryRecord.itemFullSerial}}</td>
                                                <!--<td md-cell>{{linkedDocumentHistoryRecord.itemType}}</td>-->
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.linkedDocumentsHistoryGrid.limitOptions"
                                                md-limit="ctrl.linkedDocumentsHistoryGrid.limit"
                                                md-page="ctrl.linkedDocumentsHistoryGrid.page"
                                                md-total="{{ctrl.linkedDocumentsHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- Attachments History Grid -->
                    <md-tab label="{{lang.view_tracking_sheet_attachments_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_attachments_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_attachments_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.attachmentsHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="itemName"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="attachmentHistoryRecord" md-row
                                                ng-repeat="attachmentHistoryRecord in ctrl.attachmentsHistoryRecords | filter:ctrl.searchModelAttachmentsHistory | limitTo: ctrl.attachmentsHistoryGrid.limit: ((ctrl.attachmentsHistoryGrid.page - 1) * ctrl.attachmentsHistoryGrid.limit) |orderBy:ctrl.attachmentsHistoryGrid.order  track by $index">
                                                <td md-cell>{{attachmentHistoryRecord.itemName}}</td>
                                                <td md-cell>{{attachmentHistoryRecord.getTranslatedAction()}}</td>
                                                <td md-cell>{{attachmentHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{attachmentHistoryRecord.actionDate }}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.attachmentsHistoryGrid.limitOptions"
                                                md-limit="ctrl.attachmentsHistoryGrid.limit"
                                                md-page="ctrl.attachmentsHistoryGrid.page"
                                                md-total="{{ctrl.attachmentsHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- Merged Linked Document History Grid -->
                    <md-tab label="{{lang.view_tracking_sheet_merged_linked_document_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_merged_linked_document_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_merged_linked_document_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.mergedLinkedDocHistoryGrid.order"
                                                   md-on-reorder="ctrl.sortMergedLinkedDocs()">
                                            <tr md-row>
                                                <th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="documentCreationDate"><span>{{lang.view_tracking_sheet_creation_date}}</span>
                                                </th>
                                                <th md-column md-order-by="mainDoc"><span>{{lang.view_tracking_sheet_main_doc}}</span>
                                                </th>
                                                <th md-column><span>{{lang.view_tracking_sheet_actions}}</span></th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="mergedLinkedDocHistory" md-row
                                                ng-repeat="mergedLinkedDocHistory in ctrl.mergedLinkedDocumentHistoryRecords | filter:ctrl.searchModelMergedLinkedDocHistory | limitTo: ctrl.mergedLinkedDocHistoryGrid.limit: ((ctrl.mergedLinkedDocHistoryGrid.page - 1) * ctrl.mergedLinkedDocHistoryGrid.limit) |orderBy:ctrl.mergedLinkedDocHistoryGrid.order  track by $index">
                                                <td md-cell>{{mergedLinkedDocHistory.docSubject}}</td>
                                                <td md-cell>{{mergedLinkedDocHistory.documentCreationDate}}</td>
                                                <td md-cell>
                                                    <md-icon md-svg-icon="check"
                                                             ng-if="mergedLinkedDocHistory.mainDoc"
                                                             aria-label="{{lang.main_document}}"
                                                             title="{{mergedLinkedDocHistory.getTranslatedMainDocument()}}"></md-icon>
                                                    <md-icon md-svg-icon="close"
                                                             ng-if="!mergedLinkedDocHistory.mainDoc"
                                                             aria-label="{{lang.main_document}}"
                                                             title="{{mergedLinkedDocHistory.getTranslatedMainDocument()}}"></md-icon>
                                                </td>
                                                <td md-cell>
                                                    <div flex layout="row" layout-align="start center">
                                                        <md-button class="md-icon-button"
                                                                   title="{{lang.view_tracking_sheet_view_actions}}"
                                                                   ng-if="mergedLinkedDocHistory.events && mergedLinkedDocHistory.events.length"
                                                                   ng-click="ctrl.viewMergedLinkedDocumentsHistoryEvents(mergedLinkedDocHistory, $event)">
                                                            <md-icon md-svg-icon="coins"></md-icon>
                                                        </md-button>
                                                        <md-icon md-svg-icon="coins"
                                                                 ng-if="!mergedLinkedDocHistory.events || !mergedLinkedDocHistory.events.length"
                                                                 aria-label="{{lang.view_tracking_sheet_actions}}"></md-icon>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.mergedLinkedDocHistoryGrid.limitOptions"
                                                md-limit="ctrl.mergedLinkedDocHistoryGrid.limit"
                                                md-page="ctrl.mergedLinkedDocHistoryGrid.page"
                                                md-total="{{ctrl.mergedLinkedDocumentHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- Linked Entities History Grid -->
                    <md-tab label="{{lang.view_tracking_sheet_linked_entities_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_linked_entities_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_linked_entities_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.linkedEntitiesHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <!-- <th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_entity_identifier}}</span>
                                                 </th>-->
                                                <th md-column md-order-by="itemType"><span>{{lang.view_tracking_sheet_entity_type}}</span>
                                                </th>
                                                <th md-column md-order-by="itemName"><span>{{lang.view_tracking_sheet_destination_full_name}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="linkedEntitiesHistoryRecord" md-row
                                                ng-repeat="linkedEntitiesHistoryRecord in ctrl.linkedEntitiesHistoryRecords | filter:ctrl.searchModelLinkedEntitiesHistory | limitTo: ctrl.linkedEntitiesHistoryGrid.limit: ((ctrl.linkedEntitiesHistoryGrid.page - 1) * ctrl.linkedEntitiesHistoryGrid.limit) |orderBy:ctrl.linkedEntitiesHistoryGrid.order  track by $index">
                                                <td md-cell>{{linkedEntitiesHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{linkedEntitiesHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{linkedEntitiesHistoryRecord.getTranslatedAction()}}</td>
                                                <!--<td md-cell>{{linkedEntitiesHistoryRecord.getTranslatedItemType()}}</td>-->
                                                <td md-cell>
                                                    {{linkedEntitiesHistoryRecord.itemTypeInfo.getTranslatedName()}}
                                                </td>
                                                <td md-cell>{{linkedEntitiesHistoryRecord.itemName}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.linkedEntitiesHistoryGrid.limitOptions"
                                                md-limit="ctrl.linkedEntitiesHistoryGrid.limit"
                                                md-page="ctrl.linkedEntitiesHistoryGrid.page"
                                                md-total="{{ctrl.linkedEntitiesHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- Destination History -->
                    <md-tab label="{{lang.view_tracking_sheet_destination_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_destination_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_destination_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.destinationHistoryGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_action}}</span>
                                                </th>
                                                <!--<th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_destination_identitfier}}</span>
                                                </th>-->
                                                <th md-column md-order-by="operation"><span>{{lang.view_tracking_sheet_destination_full_name}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="destinationHistoryRecord" md-row
                                                ng-repeat="destinationHistoryRecord in ctrl.destinationHistoryRecords | filter:ctrl.searchModelDestinationHistory | limitTo: ctrl.destinationHistoryGrid.limit: ((ctrl.destinationHistoryGrid.page - 1) * ctrl.destinationHistoryGrid.limit) |orderBy:ctrl.destinationHistoryGrid.order  track by $index">
                                                <td md-cell>{{destinationHistoryRecord.getTranslatedActionBy()}}</td>
                                                <td md-cell>{{destinationHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{destinationHistoryRecord.getTranslatedAction()}}</td>
                                                <!--<td md-cell></td>-->
                                                <td md-cell>{{destinationHistoryRecord.itemName}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.destinationHistoryGrid.limitOptions"
                                                md-limit="ctrl.destinationHistoryGrid.limit"
                                                md-page="ctrl.destinationHistoryGrid.page"
                                                md-total="{{ctrl.destinationHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- Content View History -->
                    <md-tab label="{{lang.view_tracking_sheet_content_view_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_content_view_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_content_view_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.contentViewHistoryGrid.order">
                                            <tr md-row>
                                                <!--<th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="ouInfo"><span>{{lang.view_tracking_sheet_organization}}</span>
                                                </th>-->
                                                <th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>
                                                <th md-column md-order-by="documentType"><span>{{lang.view_tracking_sheet_document_type}}</span>
                                                </th>
                                                <th md-column><span>{{lang.view_tracking_sheet_viewers}}</span></th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="contentViewHistoryRecord" md-row
                                                ng-repeat="contentViewHistoryRecord in ctrl.contentViewHistoryRecords | filter:ctrl.searchModelContentViewHistory | limitTo: ctrl.contentViewHistoryGrid.limit: ((ctrl.contentViewHistoryGrid.page - 1) * ctrl.contentViewHistoryGrid.limit) |orderBy:ctrl.contentViewHistoryGrid.order  track by $index">
                                                <!-- <td md-cell>{{contentViewHistoryRecord.getTranslatedActionBy()}}</td>
                                                 <td md-cell>{{contentViewHistoryRecord.actionDate}}</td>
                                                 <td md-cell>{{contentViewHistoryRecord.docSubject}}</td>
                                                 <td md-cell>{{contentViewHistoryRecord.getTranslatedOUInfo()}}</td>-->
                                                <td md-cell>{{contentViewHistoryRecord.docSubject}}</td>
                                                <td md-cell>{{contentViewHistoryRecord.documentType}}</td>
                                                <td md-cell>
                                                    <div flex layout="row" layout-align="start center">
                                                        <md-button class="md-icon-button"
                                                                   title="{{lang.view_tracking_sheet_viewers}}"
                                                                   ng-if="contentViewHistoryRecord.events && contentViewHistoryRecord.events.length"
                                                                   ng-click="ctrl.viewContentViewHistoryEvents(contentViewHistoryRecord, $event)">
                                                            <md-icon md-svg-icon="account-multiple"></md-icon>
                                                        </md-button>
                                                        <md-icon md-svg-icon="coins"
                                                                 ng-if="!contentViewHistoryRecord.events || !contentViewHistoryRecord.events.length"
                                                                 aria-label="{{lang.view_tracking_sheet_viewers}}"></md-icon>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.contentViewHistoryGrid.limitOptions"
                                                md-limit="ctrl.contentViewHistoryGrid.limit"
                                                md-page="ctrl.contentViewHistoryGrid.page"
                                                md-total="{{ctrl.contentViewHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- SMS Logs -->
                   <!-- <md-tab label="{{lang.view_tracking_sheet_sms_logs}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_sms_logs')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_sms_logs')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.smsLogsGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="message"><span>{{lang.sms_message}}</span>
                                                </th>
                                                <th md-column md-order-by="smsTemplateId">
                                                    <span>{{lang.sms_template}}</span>
                                                </th>
                                                <th md-column md-order-by="ouId"><span>{{lang.organizations}}</span>
                                                </th>
                                                <th md-column md-order-by="actionBy"><span>{{lang.username}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.action_date}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="smsLogRecord" md-row
                                                ng-repeat="smsLogRecord in ctrl.smsLogRecords | filter:ctrl.searchModelSMSLogs | limitTo: ctrl.smsLogsGrid.limit: ((ctrl.smsLogsGrid.page - 1) * ctrl.smsLogsGrid.limit) |orderBy:ctrl.smsLogsGrid.order  track by $index">
                                                <td md-cell>{{smsLogRecord.message}}</td>
                                                <td md-cell>{{smsLogRecord.smsTemplateId}}</td>
                                                <td md-cell>{{smsLogRecord.ouId}}</td>
                                                <td md-cell>{{smsLogRecord.actionBy}}</td>
                                                <td md-cell>{{smsLogRecord.actionDate}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.smsLogsGrid.limitOptions"
                                                md-limit="ctrl.smsLogsGrid.limit"
                                                md-page="ctrl.smsLogsGrid.page"
                                                md-total="{{ctrl.smsLogRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>-->
                    <!-- Outgoing Delivery Reports / Messaging History -->
                    <md-tab label="{{lang.view_tracking_sheet_outgoing_delivery_reports}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_outgoing_delivery_reports')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_outgoing_delivery_reports')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.outgoingDeliveryReportGrid.order">
                                            <tr md-row>
                                                <th md-column md-order-by="sentByIdInfo"><span>{{lang.view_tracking_sheet_sent_by}}</span></th>
                                                <th md-column md-order-by="receivedById"><span>{{lang.view_tracking_sheet_main_site_from}}</span></th>
                                                <th md-column md-order-by="comment"><span>{{lang.view_tracking_sheet_main_sub_site_from}}</span></th>
                                                <th md-column md-order-by="sentDate"><span>{{lang.view_tracking_sheet_priority_level}}</span></th>
                                                <th md-column md-order-by="deliveryDate"><span>{{lang.view_tracking_sheet_message_status}}</span></th>
                                                <th md-column md-order-by="followupDate"><span>{{lang.view_tracking_sheet_received_by}}</span></th>
                                                <th md-column md-order-by="followupDate"><span>{{lang.view_tracking_sheet_main_site_to}}</span></th>
                                                <th md-column md-order-by="followupDate"><span>{{lang.view_tracking_sheet_sub_site_to}}</span></th>
                                                <th md-column md-order-by="comment"><span>{{lang.view_tracking_sheet_comments}}</span></th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="outgoingDeliveryReportRecord" md-row
                                                ng-repeat="outgoingDeliveryReportRecord in ctrl.outgoingDeliveryReportRecords | filter:ctrl.searchModelOutgoingDeliveryReports | limitTo: ctrl.outgoingDeliveryReportGrid.limit: ((ctrl.outgoingDeliveryReportGrid.page - 1) * ctrl.outgoingDeliveryReportGrid.limit) |orderBy:ctrl.outgoingDeliveryReportGrid.order  track by $index">
                                                <td md-cell>{{outgoingDeliveryReportRecord.sentByIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.mainSiteFromIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.subSiteFromIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.priorityLevelInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.messageStatusInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.receivedByIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.mainSiteToIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.subSiteToIdInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{outgoingDeliveryReportRecord.comment}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.outgoingDeliveryReportGrid.limitOptions"
                                                md-limit="ctrl.outgoingDeliveryReportGrid.limit"
                                                md-page="ctrl.outgoingDeliveryReportGrid.page"
                                                md-total="{{ctrl.outgoingDeliveryReportRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                    <!-- Full History -->
                    <md-tab label="{{lang.view_tracking_sheet_full_history}}"
                            ng-if="ctrl.showTab('view_tracking_sheet_full_history')"
                            md-on-select="ctrl.setCurrentTab('view_tracking_sheet_full_history')">
                        <md-content>
                            <div layout="column" class="p20">
                                <md-card>
                                    <md-table-container flex scroll-directive>
                                        <table md-table>
                                            <thead md-head md-order="ctrl.fullHistoryGrid.order">
                                            <tr md-row>
                                                <!--<th md-column md-order-by="docSubject"><span>{{lang.view_tracking_sheet_doc_subject}}</span>
                                                </th>-->
                                                <th md-column md-order-by="actionByInfo"><span>{{lang.view_tracking_sheet_action_by}}</span>
                                                </th>
                                                <th md-column md-order-by="actionDate"><span>{{lang.view_tracking_sheet_action_date}}</span>
                                                </th>
                                                <th md-column md-order-by="updateByInfo"><span>{{lang.view_tracking_sheet_action_by_department}}</span>
                                                </th>
                                                <th md-column md-order-by="updatedOn"><span>{{lang.view_tracking_sheet_action_type}}</span>
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody md-body>
                                            <tr md-select="fullHistoryRecord" md-row
                                                ng-repeat="fullHistoryRecord in ctrl.fullHistoryRecords | filter:ctrl.searchModelFullHistory | limitTo: ctrl.fullHistoryGrid.limit: ((ctrl.fullHistoryGrid.page - 1) * ctrl.fullHistoryGrid.limit) |orderBy:ctrl.fullHistoryGrid.order  track by $index">
                                                <!--<td md-cell>{{fullHistoryRecord.docSubject}}</td>-->
                                                <td md-cell>{{fullHistoryRecord.actionByInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{fullHistoryRecord.actionDate}}</td>
                                                <td md-cell>{{fullHistoryRecord.actionByOUInfo.getTranslatedName()}}</td>
                                                <td md-cell>{{fullHistoryRecord.actionTypeInfo.getTranslatedName()}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-table-pagination
                                                md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
                                                md-limit-options="ctrl.fullHistoryGrid.limitOptions"
                                                md-limit="ctrl.fullHistoryGrid.limit"
                                                md-page="ctrl.fullHistoryGrid.page"
                                                md-total="{{ctrl.fullHistoryRecords.length}}"
                                                md-page-select></md-table-pagination>
                                    </md-table-container>
                                </md-card>
                            </div>
                        </md-content>
                    </md-tab>
                </md-tabs>
            </form>
        </md-content>
        <div>
            <div layout="row">
                <md-button class="md-raised" ng-click="ctrl.exportToExcel($event)" ng-disabled="ctrl.checkDisabled($event)">
                    {{lang.export_to_excel}}
                </md-button>
                <span flex></span>
                <md-button class="md-raised" ng-click="ctrl.printSheet($event)" ng-disabled="ctrl.checkDisabled($event)">
                    {{lang.print}}
                </md-button>
                <span flex></span>
                <md-button class="md-raised" ng-click="ctrl.closeTrackingSheetPopupFromCtrl()">
                    {{lang.close}}
                </md-button>
            </div>
        </div>
    </div>
</md-dialog>