<form name="outgoing_properties">
    <fieldset class="field-set-hidden">
        <div layout="column">
            <div layout="row">
                <md-input-container ng-if="ctrl.showRegistryUnit()" flex>
                    <label for="registryOU">{{lang.corr_registry}}</label>
                    <md-select name="registryOU"
                               id="registryOU"
                               ng-change="ctrl.onRegistryChange(ctrl.document.registryOU)"
                               ng-disabled="!!ctrl.disableProperties || ctrl.checkOrganizationDisabled()"
                               ng-readonly="!ctrl.employee.hasPermissionTo(ctrl.document.docClassName + '_CENTRAL_ARCHIVING')"
                               ng-model="ctrl.document.registryOU"
                               ng-required="ctrl.checkMandatory('registryOU')">
                        <md-option ng-value="organization.id"
                                   ng-repeat="organization in ctrl.registryOrganizations">
                            {{organization.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.ou.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container ng-if="!ctrl.showRegistryUnit()" flex>
                    <label for="ou">{{lang.organization_unit}}</label>
                    <md-select name="ou"
                               id="ou"
                               ng-disabled="!!ctrl.disableProperties || ctrl.checkOrganizationDisabled()"
                               ng-readonly="!ctrl.employee.hasPermissionTo(ctrl.document.docClassName + '_CENTRAL_ARCHIVING')"
                               ng-model="ctrl.document.ou"
                               ng-required="ctrl.checkMandatory('ou')">
                        <md-option ng-value="organization.id"
                                   ng-repeat="organization in ctrl.organizations">
                            {{organization.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.ou.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container ng-if="ctrl.showRegistryUnit()" flex>
                    <label for="ou">{{lang.organization_unit}}</label>
                    <md-select name="ou"
                               id="ou"
                               ng-disabled="!!ctrl.disableProperties || ctrl.checkOrganizationDisabled()"
                               ng-readonly="!ctrl.employee.hasPermissionTo(ctrl.document.docClassName + '_CENTRAL_ARCHIVING')"
                               ng-model="ctrl.document.ou"
                               ng-required="ctrl.checkMandatory('ou')">
                        <md-option ng-value="organization.id"
                                   ng-repeat="organization in ctrl.subOrganizations">
                            {{organization.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.ou.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container ng-if="ctrl.document.hasVsId()" flex>
                    <label for="securityLevel">{{lang.security_level}}</label>
                    <input id="securityLevel" name="securityLevel"
                           ng-disabled="true"
                           ng-value="ctrl.sourceModel.securityLevel.getTranslatedName()">
                </md-input-container>
                <md-input-container ng-if="!ctrl.document.hasVsId()" flex>
                    <label for="securityLevel">{{lang.security_level}}</label>
                    <md-select name="securityLevel"
                               id="securityLevel"
                               ng-change="ctrl.onSecurityLevelChange()"
                               ng-disabled="!!ctrl.disableProperties"
                               ng-model="ctrl.document.securityLevel"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('securityLevel')">
                        <md-option ng-value="level"
                                   ng-repeat="level in ctrl.securityLevels">
                            {{level.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.securityLevel.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>

                <md-input-container flex ng-if='ctrl.document.docClassName.toLowerCase() === "incoming"'>
                    <label for="refDocNumber">{{lang.document_number}}</label>
                    <input name="refDocNumber" id="refDocNumber"
                           ng-required="ctrl.checkMandatory('refDocNumber')"
                           ng-disabled="!!ctrl.disableProperties"
                           ng-model="ctrl.document.refDocNumber">
                    <!--custom-validate-directive="number"-->
                    <div ng-messages="outgoing_properties.refDocNumber.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                        <!--<div ng-message="number">{{lang.numberonly}}</div>-->
                    </div>
                </md-input-container>

                <md-input-container flex ng-if='ctrl.document.docClassName.toLowerCase() === "internal"'>
                    <label for="type">{{lang.type}}</label>
                    <md-select name="type" id="type"
                               ng-disabled="!!ctrl.disableProperties"
                               ng-model="ctrl.document.internalDocType"
                               ng-required="ctrl.checkMandatory('internalDocType')"
                               required>
                        <md-option ng-value="type.id"
                                   ng-repeat="type in ctrl.typeOptions track by $index">
                            {{lang.current==="en"? type.enName:type.arName}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.type.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>

                <md-input-container>
                    <label for="docDate">{{lang.date}}</label>
                    <md-datepicker name="docDate" id="docDate"
                                   ng-disabled="!!ctrl.disableProperties"
                                   ng-model="ctrl.document.docDate"
                                   md-max-date="ctrl.maxCreateDate"
                                   ng-required="ctrl.checkMandatory('docDate')"
                                   md-open-on-focus></md-datepicker>
                    <!--md-placeholder="{{lang.document_date}}"-->
                    <div ng-messages="outgoing_properties.docDate.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
            </div>
            <div layout="row">
                <md-input-container flex>
                    <label for="mainClassification">{{lang.outgoing_main_classification}}</label>
                    <md-select name="mainClassification"
                               id="mainClassification"
                               ng-disabled="!!ctrl.disableProperties"
                               ng-model="ctrl.document.mainClassification"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('mainClassification')">
                        <md-option ng-value="classification.classification"
                                   ng-repeat="classification in ctrl.classifications">
                            {{classification.classification.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.mainClassification.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container flex>
                    <label for="subClassification">{{lang.outgoing_sub_classification}}</label>
                    <md-select
                            ng-disabled="!!ctrl.disableProperties || !ctrl.document.mainClassification"
                            name="subClassification"
                            id="subClassification"
                            ng-model-options="{trackBy: '$value.id'}"
                            ng-model="ctrl.document.subClassification"
                            ng-required="ctrl.checkMandatory('subClassification')">
                        <md-option ng-value="classification"
                                   ng-repeat="classification in ctrl.document.mainClassification.children">
                            {{classification.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.subClassification.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container flex>
                    <label for="docSubject">{{lang.document_subject}}</label>
                    <input name="docSubject"
                           id="docSubject"
                           ng-disabled="!!ctrl.disableProperties"
                           custom-validate-directive="AEN"
                           ng-model="ctrl.document.docSubject"
                           ng-required="ctrl.checkMandatory('docSubject')">
                    <div ng-messages="outgoing_properties.docSubject.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                        <div ng-message="AEN">{{lang.arabic_english_number}}</div>
                    </div>
                </md-input-container>
            </div>
            <div layout="row">
                <md-input-container flex>
                    <label for="priorityLevel">{{lang.outgoing_priority_level}}</label>
                    <md-select name="priorityLevel"
                               id="priorityLevel"
                               ng-disabled="!!ctrl.disableProperties"
                               ng-model="ctrl.document.priorityLevel"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('priorityLevel')">
                        <md-option ng-value="priorityLevel"
                                   ng-repeat="priorityLevel in ctrl.priorityLevels">
                            {{priorityLevel.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.priorityLevel.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container flex>
                    <label for="docType">{{lang.outgoing_document_type}}</label>
                    <md-select name="docType"
                               id="docType"
                               ng-disabled="!!ctrl.disableProperties"
                               ng-model="ctrl.document.docType"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('docType')">
                        <md-option ng-value="documentType"
                                   ng-repeat="documentType in ctrl.documentTypes">
                            {{documentType.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.docType.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container ng-if="!ctrl.disableProperties">
                    <md-button class="md-icon-button"
                               ng-disabled="!!ctrl.disableProperties"
                               ng-click="ctrl.shortcut.addNewDocumentType($event)">
                        <md-icon md-svg-icon="plus"></md-icon>
                    </md-button>
                </md-input-container>
            </div>
            <div layout="row">
                <md-input-container flex>
                    <label for="fileId">{{lang.outgoing_file}}</label>
                    <md-select name="fileId"
                               id="fileId"
                               ng-change="ctrl.onFileChange(ctrl.document.fileId)"
                               ng-model="ctrl.document.fileId"
                               ng-disabled="!!ctrl.disableProperties"
                               ng-model-options="{trackBy: '$value.id'}"
                               ng-required="ctrl.checkMandatory('fileId')">
                        <md-option ng-value="file.file"
                                   ng-repeat="file in ctrl.documentFiles">
                            {{file.file.getTranslatedName()}}
                        </md-option>
                    </md-select>
                    <div ng-messages="outgoing_properties.fileId.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container ng-if="!ctrl.disableProperties">
                    <md-button tooltip="{{lang.outgoing_add_new_document_file}}"
                               class="md-icon-button"

                               ng-disabled="!!ctrl.disableProperties"
                               ng-click="ctrl.shortcut.addNewDocumentFile($event)">
                        <md-icon md-svg-icon="plus"></md-icon>
                    </md-button>
                </md-input-container>
                <md-input-container flex>
                    <label for="fileCode">{{lang.outgoing_file_code}}</label>
                    <input name="fileCode"
                           id="fileCode"
                           ng-disabled="!!ctrl.disableProperties"
                           ng-enter="ctrl.onFileCodeChanged()"
                           ng-model="ctrl.document.fileCode"
                           ng-required="ctrl.checkMandatory('fileCode')">
                    <div ng-messages="outgoing_properties.fileCode.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                    </div>
                </md-input-container>
                <md-input-container flex>
                    <label for="fileSerial">{{lang.outgoing_file_serial}}</label>
                    <input name="fileSerial" custom-validate-directive="number"
                           id="fileSerial"
                           ng-disabled="!!ctrl.disableProperties"
                           ng-model="ctrl.document.fileSerial"
                           ng-required="ctrl.checkMandatory('fileSerial')">
                    <div ng-messages="outgoing_properties.fileSerial.$error">
                        <div ng-message="required">{{lang.field_required}}</div>
                        <div ng-message="number">{{lang.numberonly}}</div>
                    </div>
                </md-input-container>
            </div>
            <div layout="row">
                <md-input-container flex>
                    <label for="docNotes">{{lang.properties_notes}}</label>
                    <textarea ng-required="ctrl.checkMandatory('docNotes')" name="docNotes" id="docNotes"
                              ng-model="ctrl.document.docNotes" rows="5"
                              ng-disabled="!!ctrl.disableProperties"></textarea>
                </md-input-container>
            </div>
        </div>
    </fieldset>
</form>