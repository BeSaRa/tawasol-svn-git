<div layout="column" class="p20">
    <md-input-container class="exclude-margin" flex>
        <label>{{lang.sites_select_site_type}}</label>
        <md-select ng-model="ctrl.selectedSiteType" ng-change="ctrl.onSiteTypeChange($event)">
            <md-option ng-value="type" ng-repeat="type in ctrl.correspondenceSiteTypes">
                {{type.getTranslatedName()}}
            </md-option>
        </md-select>
    </md-input-container>
    <md-input-container class="exclude-margin" flex>
        <label>{{lang.main_site}}</label>
        <md-select ng-model="ctrl.selectedMainSite"
                   ng-disabled="!ctrl.selectedSiteType || !ctrl.selectedSiteType.id"
                   ng-change="ctrl.getSubSites($event)">
            <md-option ng-value="type" ng-repeat="type in ctrl.mainSites">
                {{type.getTranslatedName()}}
            </md-option>
        </md-select>
    </md-input-container>
    <md-autocomplete
            flex
            ng-disabled="!ctrl.selectedMainSite || ctrl.selectedItem"
            md-no-cache="true"
            md-selected-item="ctrl.selectedItem"
            md-selected-item-change="ctrl.changeSubCorrespondence(ctrl.selectedItem)"
            md-search-text="ctrl.searchText"
            md-items="item in ctrl.querySearch(ctrl.searchText)"
            md-item-text="item.getTranslatedName()"
            md-min-length="0"
            placeholder="{{lang.sub_site}}"
            md-autofocus>
        <md-item-template>
            <span md-highlight-text="ctrl.searchText" md-highlight-flags="i">{{item.getTranslatedName()}} - {{ item.getTranslatedName(true)}}</span>
        </md-item-template>
        <md-not-found>
            {{lang.no_sites_to_display}}
        </md-not-found>
    </md-autocomplete>
</div>