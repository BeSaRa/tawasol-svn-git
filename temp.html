<md-table-container>
    <div flex scroll-directive>
        <table md-table md-row-select multiple ng-model="ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments"
               md-progress="ctrl.searchScreens.general.controller.grid.progress">
            <thead md-head md-order="ctrl.searchScreens.general.controller.grid.order" md-on-reorder="ctrl.searchScreens.general.controller.getSortedData">
            <tr md-row>
                <th colspan="{{ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length > 1 ? 8 : 9}}"
                    ng-if="ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length" md-column>
                    <div layout="row" layout-align="start center">
                        <span>{{ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length}} {{lang.items_selected}} </span>
                        <span flex></span>
                        <!--<md-button class="md-icon-button" ng-if="ctrl.searchScreens.general.controller.employeeService.hasPermissionTo('LAUNCH_DISTRIBUTION_WORKFLOW')"
                                   ng-if="ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length > 1"
                                   tooltip="{{lang.grid_action_launch_distribution_workflow}}"
                                   ng-click="ctrl.searchScreens.general.controller.launchDistributionWorkflowBulk($event)">
                            <md-icon md-svg-icon="sitemap"></md-icon>
                        </md-button>
                        <md-button class="md-icon-button"
                                   tooltip="{{lang.grid_action_archive}}"
                                   ng-if="ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length > 1"
                                   ng-click="ctrl.searchScreens.general.controller.archiveGeneralBulk($event)">
                            <md-icon md-svg-icon="stop"></md-icon>
                        </md-button>-->
                        <!-- Add to Favorite -->
                        <md-button class="md-icon-button" class="action-green"
                                   tooltip="{{lang.grid_action_add_to_favorite}}"
                                   ng-if="ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length"
                                   ng-click="ctrl.searchScreens.general.controller.addToFavoriteBulk($event)">
                            <md-icon md-svg-icon="star"></md-icon>
                        </md-button>
                    </div>
                </th>
                <th md-column>
                    <!-- Indicators -->
                </th>
                <th ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length" md-column
                    md-order-by="docFullSerial">
                    <span>{{lang.label_serial}}</span>
                </th>
                <th ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length" md-column
                    md-order-by="docSubject">
                    <span>{{lang.subject}}</span>
                </th>
                <th ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length" md-column
                    md-order-by="{{ctrl.searchScreens.general.controller.getSortingKey('priorityLevel', 'Lookup')}}">
                    <span>{{lang.priority_level}}</span>
                </th>
                <th ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length" md-column
                    md-order-by="{{ctrl.searchScreens.general.controller.getSortingKey('docTypeForSearchGrid', 'DocumentType')}}">
                    <span>{{lang.label_document_type}}</span>
                </th>
                <th ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length" md-column
                    md-order-by="{{ctrl.searchScreens.general.controller.getSortingKey('creatorInfo', 'DocumentType')}}">
                    <span>{{lang.creator}}</span>
                </th>
                <th ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length" md-column
                    md-order-by="createdOn">
                    <span>{{lang.created_on}}</span>
                </th>
                <th ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length && ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length < 2"
                    md-column>
                    <span></span>
                </th>
            </tr>
            </thead>
            <tbody md-body>
            <tr md-row md-select="searchedGeneralDocument" grid-right-click-directive
                model="searchedGeneralDocument"
                selected-length="{{ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length ? ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length : 0}}"
                ng-repeat="searchedGeneralDocument in searchResults = (ctrl.searchScreens.general.controller.searchedGeneralDocuments | filter:ctrl.searchScreens.general.controller.searchModel | limitTo: ctrl.searchScreens.general.controller.grid.limit: ((ctrl.searchScreens.general.controller.grid.page - 1) * ctrl.searchScreens.general.controller.grid.limit)) track by $index">
                <td md-cell class="indicator-td">
                    <!-- Security Level -->
                    <grid-indicator-directive record="searchedGeneralDocument"
                                              indicator-type="securityLevel"
                                              record-type="correspondence"></grid-indicator-directive>
                    <!-- Document Class (Outgoing/Incoming/Internal) -->
                    <grid-indicator-directive record="searchedGeneralDocument"
                                              indicator-type="docClass"
                                              record-type="correspondence"></grid-indicator-directive>
                    <!-- Paper/Electronic-->
                    <grid-indicator-directive record="searchedGeneralDocument"
                                              ng-if="searchedGeneralDocument.getInfo().documentClass !== 'incoming'"
                                              indicator-type="paperElectronic"
                                              record-type="correspondence"></grid-indicator-directive>
                    <!-- Priority Level -->
                    <grid-indicator-directive record="searchedGeneralDocument"
                                              indicator-type="priorityLevel"
                                              record-type="correspondence"></grid-indicator-directive>
                    <!-- Has Attachments -->
                    <grid-indicator-directive record="searchedGeneralDocument"
                                              indicator-type="hasAttachment"
                                              record-type="correspondence"></grid-indicator-directive>
                    <!-- Linked Documents -->
                    <grid-indicator-directive record="searchedGeneralDocument"
                                              indicator-type="hasLinkedDocuments"
                                              record-type="correspondence"></grid-indicator-directive>
                    <!-- Site Follow up Due Date -->
                    <grid-indicator-directive record="searchedGeneralDocument"
                                              indicator-type="siteFollowUpDueDate"
                                              record-type="correspondence"></grid-indicator-directive>
                    <span flex
                          ng-class="{'indicator-content': searchedGeneralDocument.followUpStatusIndicator}">
                                        <md-icon ng-if="searchedGeneralDocument.followUpStatusIndicator"
                                                 class="{{searchedGeneralDocument.followUpStatusIndicator.class}}"
                                                 md-svg-icon="{{searchedGeneralDocument.followUpStatusIndicator.icon}}"
                                                 tooltip="{{lang[searchedGeneralDocument.followUpStatusIndicator.tooltip].change({name: searchedGeneralDocument.followupStatusLookup.getTranslatedName()})}}"
                                        ></md-icon>
                                    </span>
                </td>
                <td md-cell><span class="serial-td">{{searchedGeneralDocument.docFullSerial}}</span>
                </td>
                <td md-cell class="subject">
                    <!--<grid-document-subject-directive record="searchedGeneralDocument"
                                                     plain-text-only="!searchedGeneralDocument.hasContent()"
                                                     click-callback="ctrl.searchScreens.general.controller.viewDocument">
                    </grid-document-subject-directive>-->
                    <a href="" ng-if="searchedGeneralDocument.hasContent() && ctrl.searchScreens.general.controller.grid.truncateSubject"
                       class="view-doc subject-internal" md-truncate
                       tooltip="{{searchedGeneralDocument.docSubject}}"
                       ng-click="ctrl.searchScreens.general.controller.viewDocument(searchedGeneralDocument, $event)">{{searchedGeneralDocument.docSubject}}</a>
                    <span ng-if="!searchedGeneralDocument.hasContent() && ctrl.searchScreens.general.controller.grid.truncateSubject"
                          class="view-doc subject-internal" md-truncate
                          tooltip="{{searchedGeneralDocument.docSubject}}">{{searchedGeneralDocument.docSubject}}</span>
                    <a href="" ng-if="searchedGeneralDocument.hasContent() && !ctrl.searchScreens.general.controller.grid.truncateSubject"
                       class="view-doc subject-internal"
                       tooltip="{{searchedGeneralDocument.docSubject}}"
                       ng-click="ctrl.searchScreens.general.controller.viewDocument(searchedGeneralDocument, $event)">{{searchedGeneralDocument.docSubject}}</a>
                    <span ng-if="!searchedGeneralDocument.hasContent() && !ctrl.searchScreens.general.controller.grid.truncateSubject"
                          class="view-doc subject-internal"
                          tooltip="{{searchedGeneralDocument.docSubject}}">{{searchedGeneralDocument.docSubject}}</span>
                </td>
                <td md-cell>{{searchedGeneralDocument.priorityLevel.getTranslatedName()}}</td>
                <td md-cell>{{searchedGeneralDocument.docTypeInfo.getTranslatedName()}}</td>
                <td md-cell>{{searchedGeneralDocument.creatorInfo.getTranslatedName()}}</td>
                <td md-cell>{{searchedGeneralDocument.createdOn}}</td>
                <td md-cell ng-if="ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length < 2">
                    <div layout-align="start center" ng-if="!ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length
                                                  || ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments.length===1 && ctrl.searchScreens.general.controller.selectedSearchedGeneralDocuments[0].id === searchedGeneralDocument.id">
                        <grid-actions-directive shortcut-actions="ctrl.searchScreens.general.controller.shortcutActions"
                                                model="searchedGeneralDocument">
                        </grid-actions-directive>
                    </div>
                </td>
            </tr>
            <tr md-row ng-if="!ctrl.searchScreens.general.controller.searchedGeneralDocuments.length">
                <td md-cell colspan="8" class="red-text text-center">{{lang.no_records_found}}</td>
            </tr>
            <tr md-row ng-if="ctrl.searchScreens.general.controller.searchedGeneralDocuments.length && !searchResults.length">
                <td md-cell colspan="8" class="red-text text-center">
                    {{lang.no_records_found_matching_search}}
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <md-table-pagination
            md-label="{page: '{{lang.page}}', rowsPerPage: '{{lang.rows_per_page}}', of: '{{lang.count_of}}'}"
            md-limit-options="ctrl.searchScreens.general.controller.grid.limitOptions"
            md-limit="ctrl.searchScreens.general.controller.grid.limit" md-page="ctrl.searchScreens.general.controller.grid.page"
            md-total="{{(ctrl.searchScreens.general.controller.searchedGeneralDocuments | filter:ctrl.searchScreens.general.controller.searchModel).length}}"
            md-page-select
            md-on-paginate="ctrl.searchScreens.general.controller.grid.pagingCallback">
    </md-table-pagination>
</md-table-container>